(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"25ba":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.error?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Login/Error message.Title"}},[t._v(" We cannot log you in ")])],1),a("ul",{staticClass:"list"},["invalid_credentials"==t.error&&t.$store.state.instance.settings.moderation.signup_approval_enabled.value?a("li",[a("translate",{attrs:{"translate-context":"Content/Login/Error message.List item/Call to action"}},[t._v(" If you signed-up recently, you may need to wait before our moderation team review your account, or verify your e-mail address. ")])],1):"invalid_credentials"==t.error?a("li",[a("translate",{attrs:{"translate-context":"Content/Login/Error message.List item/Call to action"}},[t._v(" Please double-check that your username and password combination is correct and make sure you verified your e-mail address. ")])],1):a("li",[t._v(" "+t._s(t.error)+" ")])])]):t._e(),t.$store.getters["instance/appDomain"]===t.$store.getters["instance/domain"]?[a("div",{staticClass:"field"},[a("label",{attrs:{for:"username-field"}},[a("translate",{attrs:{"translate-context":"Content/Login/Input.Label/Noun"}},[t._v("Username or e-mail address")]),t.showSignup?[t._v(" | "),a("router-link",{attrs:{to:{path:"/signup"}}},[a("translate",{attrs:{"translate-context":"*/Signup/Link/Verb"}},[t._v("Create an account")])],1)]:t._e()],2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],ref:"username",attrs:{id:"username-field",required:"",name:"username",type:"text",autofocus:"",placeholder:t.labels.usernamePlaceholder},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"password-field"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Password")]),t._v(" | "),a("router-link",{attrs:{tabindex:"1",to:{name:"auth.password-reset",query:{email:t.credentials.username}}}},[a("translate",{attrs:{"translate-context":"*/Login/*/Verb"}},[t._v("Reset your password")])],1)],1),a("password-input",{attrs:{"field-id":"password-field",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1)]:[a("p",[a("translate",{attrs:{"translate-context":"Contant/Auth/Paragraph","translate-params":{domain:t.$store.getters["instance/domain"]}}},[t._v(" You will be redirected to %{ domain } to authenticate. ")])],1)],a("button",{class:["ui",{loading:t.isLoading},"right","floated",t.buttonClasses,"button"],attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"*/Login/*/Verb"}},[t._v(" Login ")])],1)],2)},s=[],r=a("c7eb"),o=a("1da1"),i=a("663d"),l={components:{PasswordInput:i["a"]},props:{next:{type:String,default:"/library"},buttonClasses:{type:String,default:"success"},showSignup:{type:Boolean,default:!0}},data:function(){return{credentials:{username:"",password:""},error:"",isLoading:!1}},computed:{labels:function(){var t=this.$pgettext("Content/Login/Input.Placeholder","Enter your username or e-mail address");return{usernamePlaceholder:t}}},created:function(){this.$store.state.auth.authenticated&&this.$router.push(this.next)},mounted:function(){this.$refs.username&&this.$refs.username.focus()},methods:{submit:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.getters["instance/appDomain"]!==t.$store.getters["instance/domain"]){e.next=6;break}return e.next=3,t.submitSession();case 3:return e.abrupt("return",e.sent);case 6:return t.isLoading=!0,e.next=9,t.$store.dispatch("auth/oauthLogin",t.next);case 9:case"end":return e.stop()}}),e)})))()},submitSession:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var a,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.isLoading=!0,t.error="",n={username:t.credentials.username,password:t.credentials.password},t.$store.dispatch("auth/login",{credentials:n,next:t.next,onError:function(t){400===t.response.status?a.error="invalid_credentials":a.error=t.backendErrors[0]}}).then((function(t){a.isLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()}}},u=l,c=a("2877"),d=Object(c["a"])(u,n,s,!1,null,null,null);e["a"]=d.exports},5326:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("section",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[a("translate",{attrs:{"translate-context":"Content/Login/Title/Verb"}},[t._v(" Log in to your Funkwhale account ")])],1),a("login-form",{attrs:{next:t.redirectTo}})],1)])])},s=[],r=a("25ba"),o={components:{LoginForm:r["a"]},props:{next:{type:String,default:"/library"}},data:function(){return{redirectTo:this.next}},computed:{labels:function(){var t=this.$pgettext("Head/Login/Title","Log In");return{title:t}}},created:function(){var t=this.$router.resolve(this.redirectTo);console.log(t.route.name),"404"===t.route.name&&(this.redirectTo="/library"),this.$store.state.auth.authenticated&&this.$router.push(this.redirectTo)}},i=o,l=a("2877"),u=Object(l["a"])(i,n,s,!1,null,null,null);e["default"]=u.exports},"663d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid action input"},[a("input",{attrs:{id:t.fieldId,required:"",name:"password",type:t.passwordInputType},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),a("button",{staticClass:"ui icon button",attrs:{type:"button",title:t.labels.title},on:{click:function(e){e.preventDefault(),t.showPassword=!t.showPassword}}},[a("i",{staticClass:"eye icon"})]),t.copyButton?a("button",{staticClass:"ui icon button",attrs:{type:"button",title:t.labels.copy},on:{click:function(e){return e.preventDefault(),t.copyPassword.apply(null,arguments)}}},[a("i",{staticClass:"copy icon"})]):t._e()])},s=[],r={props:{value:{type:String,required:!0},defaultShow:{type:Boolean,default:!1},copyButton:{type:Boolean,default:!1},fieldId:{type:String,required:!0}},data:function(){return{showPassword:this.defaultShow||!1}},computed:{labels:function(){return{title:this.$pgettext("Content/Settings/Button.Tooltip/Verb","Show/hide password"),copy:this.$pgettext("*/*/Button.Label/Short, Verb","Copy")}},passwordInputType:function(){return this.showPassword?"text":"password"}},methods:{copyPassword:function(){try{this._copyStringToClipboard(this.value),this.$store.commit("ui/addMessage",{content:this.$pgettext("Content/*/Paragraph","Text copied to clipboard!"),date:new Date})}catch(t){console.error("Cannot copy",t)}},_copyStringToClipboard:function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style={position:"absolute",left:"-9999px"},document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},o=r,i=a("2877"),l=Object(i["a"])(o,n,s,!1,null,null,null);e["a"]=l.exports},aff0:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("section",{staticClass:"ui vertical stripe segment"},[t.$store.state.auth.authenticated?a("div",{staticClass:"ui small text container"},[a("h2",[a("translate",{attrs:{"translate-context":"Content/Login/Title"}},[t._v(" Are you sure you want to log out? ")])],1),a("p",{directives:[{name:"translate",rawName:"v-translate",value:{username:t.$store.state.auth.username},expression:"{username: $store.state.auth.username}"}],attrs:{"translate-context":"Content/Login/Paragraph"}},[t._v(" You are currently logged in as %{ username } ")]),a("button",{staticClass:"ui button",on:{click:function(e){return t.$store.dispatch("auth/logout")}}},[a("translate",{attrs:{"translate-context":"Content/Login/Button.Label"}},[t._v(" Yes, log me out! ")])],1)]):a("div",{staticClass:"ui small text container"},[a("h2",[a("translate",{attrs:{"translate-context":"Content/Login/Title"}},[t._v(" You aren't currently logged in ")])],1),a("router-link",{staticClass:"ui button",attrs:{to:"/login"}},[a("translate",{attrs:{"translate-context":"Content/Login/Button.Label"}},[t._v(" Log in! ")])],1)],1)])])},s=[],r={computed:{labels:function(){return{title:this.$pgettext("Head/Login/Title","Log Out")}}}},o=r,i=a("2877"),l=Object(i["a"])(o,n,s,!1,null,null,null);e["default"]=l.exports}}]);