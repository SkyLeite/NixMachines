(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tracks"],{"0580":function(t,e){var a=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],r=a.join(","),i="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function s(t,e){e=e||{};var a,s,o,l=[],c=[],u=t.querySelectorAll(r);for(e.includeContainer&&i.call(t,r)&&(u=Array.prototype.slice.apply(u),u.unshift(t)),a=0;a<u.length;a++)s=u[a],n(s)&&(o=d(s),0===o?l.push(s):c.push({documentOrder:a,tabIndex:o,node:s}));var f=c.sort(p).map((function(t){return t.node})).concat(l);return f}function n(t){return!(!l(t)||m(t)||d(t)<0)}function o(t){if(!t)throw new Error("No node provided");return!1!==i.call(t,r)&&n(t)}function l(t){return!(t.disabled||b(t)||_(t))}s.isTabbable=o,s.isFocusable=u;var c=a.concat("iframe").join(",");function u(t){if(!t)throw new Error("No node provided");return!1!==i.call(t,c)&&l(t)}function d(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?f(t)?0:t.tabIndex:e}function p(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function f(t){return"true"===t.contentEditable}function h(t){return"INPUT"===t.tagName}function b(t){return h(t)&&"hidden"===t.type}function v(t){return h(t)&&"radio"===t.type}function m(t){return v(t)&&!y(t)}function g(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}function y(t){if(!t.name)return!0;var e=t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'),a=g(e);return!a||a===t}function _(t){return null===t.offsetParent||"hidden"===getComputedStyle(t).visibility}t.exports=s},"06cd":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[t.$slots.title?a("h3",{staticClass:"ui header"},[t._t("title")],2):t._e(),!t.isLoading&&t.libraries.length>0?a("p",{staticClass:"ui subtitle"},[t._t("subtitle")],2):t._e(),t.isLoading||0!==t.libraries.length?t._e():a("p",{staticClass:"ui subtitle"},[a("translate",{attrs:{"translate-context":"Content/Federation/Paragraph"}},[t._v(" No matching library. ")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui cards"},[t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._l(t.libraries,(function(e){return a("library-card",{key:e.uuid,attrs:{"display-scan":!1,"display-follow":t.$store.state.auth.authenticated&&e.actor.full_username!=t.$store.state.auth.fullUsername,"initial-library":e,"display-copy-fid":!0}})}))],2),t.nextPage?[a("div",{staticClass:"ui hidden divider"}),t.nextPage?a("button",{class:["ui","basic","button"],on:{click:function(e){return t.fetchData(t.nextPage)}}},[a("translate",{attrs:{"translate-context":"*/*/Button,Label"}},[t._v(" Show more ")])],1):t._e()]:t._e()],2)},i=[],s=a("2909"),n=(a("99af"),a("ceb5")),o=a("bc3a"),l=a.n(o),c=a("c395"),u={components:{LibraryCard:c["a"]},props:{url:{type:String,required:!0}},data:function(){return{libraries:[],limit:6,isLoading:!1,errors:null,previousPage:null,nextPage:null}},watch:{offset:function(){this.fetchData()}},created:function(){this.fetchData(this.url)},methods:{fetchData:function(t){this.isLoading=!0;var e=this,a=n["a"].clone({});a.page_size=this.limit,a.offset=this.offset,l.a.get(t,{params:a}).then((function(t){e.previousPage=t.data.previous,e.nextPage=t.data.next,e.isLoading=!1,e.libraries=[].concat(Object(s["a"])(e.libraries),Object(s["a"])(t.data.results)),e.$emit("loaded",e.libraries)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},updateOffset:function(t){t?this.offset+=this.limit:this.offset=Math.max(this.offset-this.limit,0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,r,i,!1,null,null,null);e["a"]=f.exports},"21a2":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.anonymousCanListen?t._e():a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Embed/Message"}},[t._v("Sharing will not work because this pod doesn't allow anonymous users to access content.")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Embed/Message"}},[t._v(" Please contact your admins and ask them to update the corresponding setting. ")])],1)]),a("div",{staticClass:"ui form"},[a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"embed-width"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label"}},[t._v("Widget width")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/Embed/Paragraph"}},[t._v(" Leave empty for a responsive widget ")])],1),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],attrs:{id:"embed-width",type:"number",min:"0",step:"10"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),"track"!=t.type?[a("br"),a("div",{staticClass:"field"},[a("label",{attrs:{for:"embed-height"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label"}},[t._v("Widget height")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.height,expression:"height"}],attrs:{id:"embed-height",type:"number",min:t.minHeight,max:"1000",step:"10"},domProps:{value:t.height},on:{input:function(e){e.target.composing||(t.height=e.target.value)}}})])]:t._e()],2),a("div",{staticClass:"field"},[a("button",{staticClass:"ui right accent labeled icon floated button",on:{click:t.copy}},[a("i",{staticClass:"copy icon"}),a("translate",{attrs:{"translate-context":"*/*/Button.Label/Short, Verb"}},[t._v(" Copy ")])],1),a("label",{attrs:{for:"embed-width"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label/Noun"}},[t._v("Embed code")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/Embed/Paragraph"}},[t._v(" Copy/paste this code in your website HTML ")])],1),a("textarea",{ref:"textarea",attrs:{rows:"5",readonly:""},domProps:{value:t.embedCode}}),t._v(" "),a("div",{staticClass:"ui right"},[t.copied?a("p",{staticClass:"message"},[a("translate",{attrs:{"translate-context":"Content/*/Paragraph"}},[t._v(" Text copied to clipboard! ")])],1):t._e()])])])]),a("div",{staticClass:"preview"},[a("h3",[a("a",{attrs:{href:t.iframeSrc,target:"_blank"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Title/Noun"}},[t._v("Preview")])],1)]),a("iframe",{attrs:{width:t.frameWidth,height:t.height,scrolling:"no",frameborder:"no",src:t.iframeSrc}})])])},i=[],s=a("5530"),n=(a("a9e3"),a("2ca0"),a("99af"),a("ac1f"),a("5319"),a("2f62")),o=a("ceb5"),l={props:{type:{type:String,required:!0},id:{type:Number,required:!0}},data:function(){var t={width:null,height:150,minHeight:100,copied:!1};return"album"!==this.type&&"artist"!==this.type&&"playlist"!==this.type||(t.height=330,t.minHeight=250),t},computed:Object(s["a"])(Object(s["a"])({},Object(n["d"])({nodeinfo:function(t){return t.instance.nodeinfo}})),{},{anonymousCanListen:function(){return o["a"].get(this.nodeinfo,"metadata.library.anonymousCanListen",!1)},iframeSrc:function(){var t="/front/";t.startsWith("/")&&(t="".concat(window.location.protocol,"//").concat(window.location.host).concat(t));var e=this.$store.state.instance.instanceUrl,a="";return window.location.href.startsWith(e)||(a="&b=".concat(e)),"".concat(t,"embed.html?&type=").concat(this.type,"&id=").concat(this.id).concat(a)},frameWidth:function(){return this.width?this.width:"100%"},embedCode:function(){var t=this.iframeSrc.replace(/&/g,"&amp;");return'<iframe width="'.concat(this.frameWidth,'" height="').concat(this.height,'" scrolling="no" frameborder="no" src="').concat(t,'"></iframe>')}}),methods:{copy:function(){this.$refs.textarea.select(),document.execCommand("Copy");var t=this;t.copied=!0,this.timeout=setTimeout((function(){t.copied=!1}),5e3)}}},c=l,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,null,null);e["a"]=d.exports},"25f0":function(t,e,a){"use strict";var r=a("e330"),i=a("5e77").PROPER,s=a("6eeb"),n=a("825a"),o=a("3a9b"),l=a("577e"),c=a("d039"),u=a("ad6d"),d="toString",p=RegExp.prototype,f=p[d],h=r(u),b=c((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),v=i&&f.name!=d;(b||v)&&s(RegExp.prototype,d,(function(){var t=n(this),e=l(t.source),a=t.flags,r=l(void 0===a&&o(p,t)&&!("flags"in p)?h(t):a);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,a){"use strict";var r=a("d066"),i=a("9bf2"),s=a("b622"),n=a("83ab"),o=s("species");t.exports=function(t){var e=r(t),a=i.f;n&&e&&!e[o]&&a(e,o,{configurable:!0,get:function(){return this}})}},2696:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui app-card card"},[a("div",{class:["ui","head-image","squares"],on:{click:function(e){return t.$router.push({name:"library.playlists.detail",params:{id:t.playlist.id}})}}},[t._l(t.images,(function(t,e){return a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"url"}],key:e,attrs:{alt:""}})})),a("play-button",{attrs:{"icon-only":!0,"is-playable":t.playlist.is_playable,"button-classes":["ui","circular","large","vibrant","icon","button"],playlist:t.playlist}})],2),a("div",{staticClass:"content"},[a("strong",[a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.playlists.detail",params:{id:t.playlist.id}}}},[t._v(" "+t._s(t.playlist.name)+" ")])],1),a("div",{staticClass:"description"},[a("user-link",{staticClass:"left floated",attrs:{user:t.playlist.user,avatar:!1}})],1)]),a("div",{staticClass:"extra content"},[a("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.playlist.tracks_count},"translate-n":t.playlist.tracks_count,"translate-plural":"%{ count } tracks"}},[t._v(" %{ count } track ")]),a("play-button",{staticClass:"right floated basic icon",attrs:{"dropdown-only":!0,"is-playable":t.playlist.is_playable,"dropdown-icon-classes":["ellipsis","horizontal","large really discrete"],playlist:t.playlist}})],1)])},i=[],s=(a("fb6a"),a("d81d"),a("a3e6")),n={components:{PlayButton:s["a"]},props:{playlist:{type:Object,required:!0}},computed:{images:function(){var t=this,e=this.playlist.album_covers.map((function(e){return t.$store.getters["instance/absoluteUrl"](e)})).slice(0,4);while(e.length<4)e.push(a("271e"));return e}}},o=n,l=a("2877"),c=Object(l["a"])(o,r,i,!1,null,null,null);e["a"]=c.exports},"271e":function(t,e,a){t.exports=a.p+"img/default-cover.89d13c2f.png"},"2c3e":function(t,e,a){var r=a("da84"),i=a("83ab"),s=a("9f7f").MISSED_STICKY,n=a("c6b6"),o=a("9bf2").f,l=a("69f3").get,c=RegExp.prototype,u=r.TypeError;i&&s&&o(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===n(this))return!!l(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},"404d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.additionalClasses.concat(["ui",{active:t.show},{scrolling:t.scrolling},{"overlay fullscreen":t.fullscreen&&["phone","tablet"].indexOf(t.$store.getters["ui/windowSize"])>-1},"modal"])},[a("i",{staticClass:"close inside icon",attrs:{tabindex:"0"}}),t.show?t._t("default"):t._e()],2)},i=[],s=a("1157"),n=a.n(s),o=a("6c92"),l=a.n(o),c={props:{show:{type:Boolean,required:!0},fullscreen:{type:Boolean,default:!0},scrolling:{type:Boolean,required:!1,default:!1},additionalClasses:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{control:null,focusTrap:null}},watch:{show:{handler:function(t){t?(this.initModal(),this.$emit("show"),this.control.modal("show"),this.focusTrap.activate(),this.focusTrap.unpause(),document.body.classList.add("scrolling")):this.control&&(this.$emit("hide"),this.control.modal("hide"),this.control.remove(),this.focusTrap.deactivate(),this.focusTrap.pause(),document.body.classList.remove("scrolling"))}},$route:function(t,e){this.closeModal()}},mounted:function(){this.focusTrap=l()(this.$el)},beforeDestroy:function(){this.control&&n()(this.$el).modal("hide"),this.focusTrap.deactivate(),n()(this.$el).remove()},methods:{initModal:function(){this.control=n()(this.$el).modal({duration:100,onApprove:function(){this.$emit("approved")}.bind(this),onDeny:function(){this.$emit("deny")}.bind(this),onHidden:function(){this.$emit("update:show",!1)}.bind(this),onVisible:function(){this.focusTrap.activate(),this.focusTrap.unpause()}.bind(this)})},closeModal:function(){this.$emit("update:show",!1)}}},u=c,d=a("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);e["default"]=p.exports},4389:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","pink",{inverted:t.isFavorite},{favorited:t.isFavorite},"icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{staticClass:"heart icon"}),t.isFavorite?a("translate",{attrs:{"translate-context":"Content/Track/Button.Message"}},[t._v(" In favorites ")]):a("translate",{attrs:{"translate-context":"Content/Track/*/Verb"}},[t._v(" Add to favorites ")])],1):a("button",{class:["ui","favorite-icon",{pink:t.isFavorite},{favorited:t.isFavorite},"basic","circular","icon",{really:!t.border},"button"],attrs:{"aria-label":t.title,title:t.title},on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{class:["heart",{pink:t.isFavorite},"basic","icon"]})])},i=[],s={props:{track:{type:Object,default:function(){return{}}},button:{type:Boolean,default:!1},border:{type:Boolean,default:!1}},computed:{title:function(){return this.isFavorite?this.$pgettext("Content/Track/Icon.Tooltip/Verb","Remove from favorites"):this.$pgettext("Content/Track/*/Verb","Add to favorites")},isFavorite:function(){return this.$store.getters["favorites/isFavorite"](this.track.id)}}},n=s,o=a("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);e["default"]=l.exports},"4b90":function(t,e,a){"use strict";a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("c975"),a("466d"),a("5319");e["a"]={updateQueryString:function(t,e,a){var r=new RegExp("([?&])"+e+"=.*?(&|$)","i"),i=-1!==t.indexOf("?")?"&":"?";return t.match(r)?t.replace(r,"$1"+e+"="+a+"$2"):t+i+e+"="+a}}},"4c04":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.$store.commit("playlists/chooseTrack",t.track)}}},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Sidebar/Player/Icon.Tooltip/Verb"}},[t._v(" Add to playlist… ")])],1):a("button",{class:["ui","basic","circular","icon",{really:!t.border},"button"],attrs:{"aria-label":t.labels.addToPlaylist,title:t.labels.addToPlaylist},on:{click:function(e){return e.stopPropagation(),t.$store.commit("playlists/chooseTrack",t.track)}}},[a("i",{class:["list","basic","icon"]})])},i=[],s={props:{track:{type:Object,default:function(){return{}}},button:{type:Boolean,default:!1},border:{type:Boolean,default:!1}},data:function(){return{showModal:!1}},computed:{labels:function(){return{addToPlaylist:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Add to playlist…")}}}},n=s,o=a("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);e["default"]=l.exports},"4d63":function(t,e,a){var r=a("83ab"),i=a("da84"),s=a("e330"),n=a("94ca"),o=a("7156"),l=a("9112"),c=a("9bf2").f,u=a("241c").f,d=a("3a9b"),p=a("44e7"),f=a("577e"),h=a("ad6d"),b=a("9f7f"),v=a("6eeb"),m=a("d039"),g=a("1a2d"),y=a("69f3").enforce,_=a("2626"),k=a("b622"),C=a("fce3"),w=a("107c"),x=k("match"),L=i.RegExp,S=L.prototype,$=i.SyntaxError,T=s(h),E=s(S.exec),P=s("".charAt),D=s("".replace),N=s("".indexOf),O=s("".slice),j=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,I=/a/g,F=/a/g,U=new L(I)!==I,R=b.MISSED_STICKY,B=b.UNSUPPORTED_Y,M=r&&(!U||R||C||w||m((function(){return F[x]=!1,L(I)!=I||L(F)==F||"/a/i"!=L(I,"i")}))),q=function(t){for(var e,a=t.length,r=0,i="",s=!1;r<=a;r++)e=P(t,r),"\\"!==e?s||"."!==e?("["===e?s=!0:"]"===e&&(s=!1),i+=e):i+="[\\s\\S]":i+=e+P(t,++r);return i},A=function(t){for(var e,a=t.length,r=0,i="",s=[],n={},o=!1,l=!1,c=0,u="";r<=a;r++){if(e=P(t,r),"\\"===e)e+=P(t,++r);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:E(j,O(t,r+1))&&(r+=2,l=!0),i+=e,c++;continue;case">"===e&&l:if(""===u||g(n,u))throw new $("Invalid capture group name");n[u]=!0,s[s.length]=[u,c],l=!1,u="";continue}l?u+=e:i+=e}return[i,s]};if(n("RegExp",M)){for(var V=function(t,e){var a,r,i,s,n,c,u=d(S,this),h=p(t),b=void 0===e,v=[],m=t;if(!u&&h&&b&&t.constructor===V)return t;if((h||d(S,t))&&(t=t.source,b&&(e="flags"in m?m.flags:T(m))),t=void 0===t?"":f(t),e=void 0===e?"":f(e),m=t,C&&"dotAll"in I&&(r=!!e&&N(e,"s")>-1,r&&(e=D(e,/s/g,""))),a=e,R&&"sticky"in I&&(i=!!e&&N(e,"y")>-1,i&&B&&(e=D(e,/y/g,""))),w&&(s=A(t),t=s[0],v=s[1]),n=o(L(t,e),u?this:S,V),(r||i||v.length)&&(c=y(n),r&&(c.dotAll=!0,c.raw=V(q(t),a)),i&&(c.sticky=!0),v.length&&(c.groups=v)),t!==m)try{l(n,"source",""===m?"(?:)":m)}catch(g){}return n},z=function(t){t in V||c(V,t,{configurable:!0,get:function(){return L[t]},set:function(e){L[t]=e}})},W=u(L),H=0;W.length>H;)z(W[H++]);S.constructor=V,V.prototype=S,v(i,"RegExp",V)}_("RegExp")},"53a8":function(t,e){t.exports=r;var a=Object.prototype.hasOwnProperty;function r(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)a.call(r,i)&&(t[i]=r[i])}return t}},"6b08":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"component-tags-list"},[t._l(t.toDisplay,(function(e){return a("router-link",{key:e,class:["ui","circular","hashtag","label",t.labelClasses],attrs:{to:{name:t.detailRoute,params:{id:e}}}},[t._v(" #"+t._s(t._f("truncate")(e,t.truncateSize))+" ")])})),t.showMore&&t.toDisplay.length<t.tags.length?a("div",{staticClass:"ui circular inverted accent label",attrs:{role:"button"},on:{click:function(e){e.preventDefault(),t.honorLimit=!1}}},[a("translate",{attrs:{"translate-context":"Content/*/Button/Label/Verb","translate-params":{count:t.tags.length-t.toDisplay.length},"translate-n":t.tags.length-t.toDisplay.length,"translate-plural":"Show %{ count } more tags"}},[t._v(" Show 1 more tag ")])],1):t._e()],2)},i=[],s=(a("a9e3"),a("fb6a"),{props:{tags:{type:Array,required:!0},showMore:{type:Boolean,default:!0},truncateSize:{type:Number,default:25},limit:{type:Number,default:5},labelClasses:{type:String,default:""},detailRoute:{type:String,default:"library.tags.detail"}},data:function(){return{honorLimit:!0}},computed:{toDisplay:function(){return this.honorLimit?(this.tags||[]).slice(0,this.limit):this.tags}}}),n=s,o=a("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);e["a"]=l.exports},"6c92":function(t,e,a){var r,i=a("0580"),s=a("53a8"),n=function(){var t=[];return{activateTrap:function(e){if(t.length>0){var a=t[t.length-1];a!==e&&a.pause()}var r=t.indexOf(e);-1===r||t.splice(r,1),t.push(e)},deactivateTrap:function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1),t.length>0&&t[t.length-1].unpause()}}}();function o(t,e){var a=document,o="string"===typeof t?a.querySelector(t):t,p=s({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),f={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},h={activate:b,deactivate:v,pause:m,unpause:g};return h;function b(t){if(!f.active){E(),f.active=!0,f.paused=!1,f.nodeFocusedBeforeActivation=a.activeElement;var e=t&&t.onActivate?t.onActivate:p.onActivate;return e&&e(),y(),h}}function v(t){if(f.active){clearTimeout(r),_(),f.active=!1,f.paused=!1,n.deactivateTrap(h);var e=t&&void 0!==t.onDeactivate?t.onDeactivate:p.onDeactivate;e&&e();var a=t&&void 0!==t.returnFocus?t.returnFocus:p.returnFocusOnDeactivate;return a&&d((function(){P(w(f.nodeFocusedBeforeActivation))})),h}}function m(){!f.paused&&f.active&&(f.paused=!0,_())}function g(){f.paused&&f.active&&(f.paused=!1,E(),y())}function y(){if(f.active)return n.activateTrap(h),r=d((function(){P(C())})),a.addEventListener("focusin",L,!0),a.addEventListener("mousedown",x,{capture:!0,passive:!1}),a.addEventListener("touchstart",x,{capture:!0,passive:!1}),a.addEventListener("click",T,{capture:!0,passive:!1}),a.addEventListener("keydown",S,{capture:!0,passive:!1}),h}function _(){if(f.active)return a.removeEventListener("focusin",L,!0),a.removeEventListener("mousedown",x,!0),a.removeEventListener("touchstart",x,!0),a.removeEventListener("click",T,!0),a.removeEventListener("keydown",S,!0),h}function k(t){var e=p[t],r=e;if(!e)return null;if("string"===typeof e&&(r=a.querySelector(e),!r))throw new Error("`"+t+"` refers to no known node");if("function"===typeof e&&(r=e(),!r))throw new Error("`"+t+"` did not return a node");return r}function C(){var t;if(t=null!==k("initialFocus")?k("initialFocus"):o.contains(a.activeElement)?a.activeElement:f.firstTabbableNode||k("fallbackFocus"),!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t}function w(t){var e=k("setReturnFocus");return e||t}function x(t){o.contains(t.target)||(p.clickOutsideDeactivates?v({returnFocus:!i.isFocusable(t.target)}):p.allowOutsideClick&&p.allowOutsideClick(t)||t.preventDefault())}function L(t){o.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),P(f.mostRecentlyFocusedNode||C()))}function S(t){if(!1!==p.escapeDeactivates&&c(t))return t.preventDefault(),void v();u(t)&&$(t)}function $(t){return E(),t.shiftKey&&t.target===f.firstTabbableNode?(t.preventDefault(),void P(f.lastTabbableNode)):t.shiftKey||t.target!==f.lastTabbableNode?void 0:(t.preventDefault(),void P(f.firstTabbableNode))}function T(t){p.clickOutsideDeactivates||o.contains(t.target)||p.allowOutsideClick&&p.allowOutsideClick(t)||(t.preventDefault(),t.stopImmediatePropagation())}function E(){var t=i(o);f.firstTabbableNode=t[0]||C(),f.lastTabbableNode=t[t.length-1]||C()}function P(t){t!==a.activeElement&&(t&&t.focus?(t.focus(),f.mostRecentlyFocusedNode=t,l(t)&&t.select()):P(C()))}}function l(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"===typeof t.select}function c(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}function u(t){return"Tab"===t.key||9===t.keyCode}function d(t){return setTimeout(t,0)}t.exports=o},"773e":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.$slots.title?a("h3",{staticClass:"ui header"},[t._t("title")],2):t._e(),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.playlistsExist?a("div",{staticClass:"ui cards app-cards"},t._l(t.objects,(function(t){return a("playlist-card",{key:t.id,attrs:{playlist:t}})})),1):a("div",{staticClass:"ui placeholder segment"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/Home/Placeholder"}},[t._v(" No playlists have been created yet ")])],1),t.$store.state.auth.authenticated?a("button",{staticClass:"ui success icon labeled button",on:{click:function(e){return t.$store.commit("playlists/chooseTrack",null)}}},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/Home/CreatePlaylist"}},[t._v(" Create Playlist ")])],1):t._e()]),t.nextPage?[a("div",{staticClass:"ui hidden divider"}),t.nextPage?a("button",{class:["ui","basic","button"],on:{click:function(e){return t.fetchData(t.nextPage)}}},[a("translate",{attrs:{"translate-context":"*/*/Button,Label"}},[t._v(" Show more ")])],1):t._e()]:t._e()],2)},i=[],s=a("2909"),n=(a("99af"),a("ceb5")),o=a("bc3a"),l=a.n(o),c=a("2696"),u={components:{PlaylistCard:c["a"]},props:{filters:{type:Object,required:!0},url:{type:String,required:!0}},data:function(){return{objects:[],limit:this.filters.limit||3,isLoading:!1,errors:null,previousPage:null,nextPage:null}},computed:{playlistsExist:function(){return this.objects.length>0}},watch:{offset:function(){this.fetchData()},"$store.state.moderation.lastUpdate":function(){this.fetchData(this.url)}},created:function(){this.fetchData(this.url)},methods:{fetchData:function(t){if(t){this.isLoading=!0;var e=this,a=n["a"].clone(this.filters);a.page_size=this.limit,a.offset=this.offset,l.a.get(t,{params:a}).then((function(t){e.previousPage=t.data.previous,e.nextPage=t.data.next,e.isLoading=!1,e.objects=[].concat(Object(s["a"])(e.objects),Object(s["a"])(t.data.results))}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},updateOffset:function(t){t?this.offset+=this.limit:this.offset=Math.max(this.offset-this.limit,0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,r,i,!1,null,null,null);e["a"]=f.exports},c395:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[a("h4",{staticClass:"header"},[a("router-link",{attrs:{to:{name:"library.detail",params:{id:t.library.uuid}}}},[t._v(" "+t._s(t.library.name)+" ")]),a("div",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui right floated dropdown"},[a("i",{staticClass:"ellipsis vertical large icon nomargin"}),a("div",{staticClass:"menu"},t._l(t.getReportableObjs({library:t.library,account:t.library.actor}),(function(e){return a("button",{key:e.target.type+e.target.id,staticClass:"item basic",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),0)]),"me"===t.library.privacy_level?a("span",{staticClass:"right floated",attrs:{"data-tooltip":t.labels.tooltips.me}},[a("i",{staticClass:"small lock icon"})]):"everyone"===t.library.privacy_level?a("span",{staticClass:"right floated",attrs:{"data-tooltip":t.labels.tooltips.everyone}},[a("i",{staticClass:"small globe icon"})]):t._e()],1),a("div",{staticClass:"meta"},[a("span",[a("i",{staticClass:"small outline clock icon"}),a("human-date",{attrs:{date:t.library.creation_date}})],1)]),a("div",{staticClass:"description"},[t._v(" "+t._s(t.library.description)+" "),a("div",{staticClass:"ui hidden divider"})]),a("div",{staticClass:"meta"},[a("i",{staticClass:"music icon"}),a("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.library.uploads_count},"translate-n":t.library.uploads_count,"translate-plural":"%{ count } tracks"}},[t._v(" %{ count } track ")])],1),t.displayScan&&t.latestScan?a("div",{staticClass:"meta"},["pending"===t.latestScan.status?[a("i",{staticClass:"hourglass icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v(" Scan pending ")])]:t._e(),"scanning"===t.latestScan.status?[a("i",{staticClass:"loading spinner icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item","translate-params":{progress:t.scanProgress}}},[t._v(" Scanning… (%{ progress }%) ")])]:"errored"===t.latestScan.status?[a("i",{staticClass:"dangerdownload icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v(" Problem during scanning ")])]:"finished"===t.latestScan.status&&0===t.latestScan.errored_files?[a("i",{staticClass:"success download icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v(" Scanned ")])]:"finished"===t.latestScan.status&&t.latestScan.errored_files>0?[a("i",{staticClass:"warning download icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v(" Scanned with errors ")])]:t._e(),a("a",{staticClass:"link right floated",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.showScan=!t.showScan}}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Button.Label/Noun"}},[t._v("Details")]),t.showScan?a("i",{staticClass:"angle down icon"}):a("i",{staticClass:"angle right icon"})],1),t.showScan?a("div",[t.latestScan.modification_date?[a("translate",{attrs:{"translate-context":"Content/Library/Card.List item/Noun"}},[t._v(" Last update: ")]),a("human-date",{attrs:{date:t.latestScan.modification_date}}),a("br")]:t._e(),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item/Noun"}},[t._v(" Failed tracks: ")]),t._v(" "+t._s(t.latestScan.errored_files)+" ")],2):t._e()],2):t._e(),t.displayScan&&t.canLaunchScan?a("div",{staticClass:"clearfix"},[a("a",{staticClass:"right floated link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.launchScan.apply(null,arguments)}}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Button.Label/Verb"}},[t._v("Scan now")]),t._v(" "),a("i",{staticClass:"paper plane icon"})],1)]):t._e()]),a("div",{staticClass:"extra content"},[a("actor-link",{staticStyle:{color:"var(--link-color)"},attrs:{actor:t.library.actor}})],1),t.displayCopyFid?a("div",{staticClass:"extra content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:t.library.fid}},[a("translate",{attrs:{"translate-context":"Content/Library/Title"}},[t._v("Sharing link")])],1),a("copy-input",{attrs:{id:t.library.fid,"button-classes":"basic",value:t.library.fid}})],1)])]):t._e(),t.displayFollow||t.radioPlayable?a("div",{class:["ui",{two:t.displayFollow&&t.radioPlayable},"bottom","attached","buttons"]},[t.radioPlayable?a("radio-button",{attrs:{type:"library","object-id":t.library.uuid}}):t._e(),t.displayFollow?[t.library.follow?t.library.follow.approved?t.library.follow.approved?[a("dangerous-button",{class:["ui","button"],attrs:{action:t.unfollow}},[a("translate",{attrs:{"translate-context":"*/Library/Button.Label/Verb"}},[t._v(" Unfollow ")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v(" Unfollow this library? ")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Popup/Library/Paragraph"}},[t._v(" By unfollowing this library, you loose access to its content. ")])],1)]),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/Library/Button.Label/Verb"}},[t._v(" Unfollow ")])],1)],1)]:t._e():[a("button",{staticClass:"ui disabled button"},[a("i",{staticClass:"hourglass icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.Paragraph"}},[t._v(" Follow request pending approval ")])],1),a("button",{staticClass:"ui button",on:{click:t.unfollow}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Paragraph"}},[t._v(" Cancel follow request ")])],1)]:a("button",{class:["ui","success",{loading:t.isLoadingFollow},"button"],on:{click:function(e){return t.follow()}}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Button.Label/Verb"}},[t._v(" Follow ")])],1)]:t._e()],2):t._e()])},i=[],s=(a("e25e"),a("bc3a")),n=a.n(s),o=a("add5"),l=a("d4fd"),c={components:{RadioButton:l["a"]},mixins:[o["a"]],props:{initialLibrary:{type:Object,required:!0},displayFollow:{type:Boolean,default:!0},displayScan:{type:Boolean,default:!0},displayCopyFid:{type:Boolean,default:!0}},data:function(){return{library:this.initialLibrary,isLoadingFollow:!1,showScan:!1,scanTimeout:null,latestScan:this.initialLibrary.latest_scan}},computed:{labels:function(){var t=this.$pgettext("Content/Library/Card.Help text","This library is private and your approval from its owner is needed to access its content"),e=this.$pgettext("Content/Library/Card.Help text","This library is public and you can access its content freely");return{tooltips:{me:t,everyone:e}}},scanProgress:function(){var t=this.latestScan,e=100*t.processed_files/t.total_files;return Math.min(parseInt(e),100)},scanStatus:function(){return this.latestScan?this.latestScan.status:"unknown"},canLaunchScan:function(){return"pending"!==this.scanStatus&&"scanning"!==this.scanStatus},radioPlayable:function(){return(this.library.actor.is_local||"finished"===this.scanStatus)&&("everyone"===this.library.privacy_level||this.library.follow&&this.library.follow.is_approved)}},watch:{showScan:function(t,e){t?"pending"!==this.scanStatus&&"scanning"!==this.scanStatus||this.fetchScanStatus():this.scanTimeout&&clearTimeout(this.scanTimeout)}},methods:{launchScan:function(){var t=this,e=this.$pgettext("Content/Library/Message","Scan launched"),a=this.$pgettext("Content/Library/Message","Scan skipped (previous scan is too recent)");n.a.post("federation/libraries/".concat(this.library.uuid,"/scan/")).then((function(r){var i;"skipped"===r.data.status?i=a:(t.latestScan=r.data.scan,i=e),t.$store.commit("ui/addMessage",{content:i,date:new Date})}))},follow:function(){var t=this;this.isLoadingFollow=!0,n.a.post("federation/follows/library/",{target:this.library.uuid}).then((function(e){t.library.follow=e.data,t.isLoadingFollow=!1,t.$emit("followed")}),(function(e){t.isLoadingFollow=!1,t.$store.commit("ui/addMessage",{content:"Cannot follow remote library: "+e,date:new Date})}))},unfollow:function(){var t=this;this.isLoadingFollow=!0,n.a.delete("federation/follows/library/".concat(this.library.follow.uuid,"/")).then((function(e){t.$emit("deleted"),t.library.follow=null,t.isLoadingFollow=!1}),(function(e){t.isLoadingFollow=!1,t.$store.commit("ui/addMessage",{content:"Cannot unfollow remote library: "+e,date:new Date})}))},fetchScanStatus:function(){var t=this;n.a.get("federation/follows/library/".concat(this.library.follow.uuid,"/")).then((function(e){t.latestScan=e.data.target.latest_scan,"pending"===t.scanStatus||"scanning"===t.scanStatus?t.scanTimeout=setTimeout(t.fetchScanStatus(),5e3):clearTimeout(t.scanTimeout)}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);e["a"]=p.exports},c607:function(t,e,a){var r=a("da84"),i=a("83ab"),s=a("fce3"),n=a("c6b6"),o=a("9bf2").f,l=a("69f3").get,c=RegExp.prototype,u=r.TypeError;i&&s&&o(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===n(this))return!!l(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},d4fd:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:["ui","primary",{inverted:t.running},"icon","labeled","button"],on:{click:t.toggleRadio}},[a("i",{staticClass:"ui feed icon",attrs:{role:"button"}}),t.running?[a("translate",{attrs:{"translate-context":"*/Player/Button.Label/Short, Verb"}},[t._v(" Stop radio ")])]:[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v(" Play radio ")])]],2)},i=[],s=(a("a9e3"),a("ceb5")),n={props:{customRadioId:{type:Number,required:!1,default:null},type:{type:String,required:!1,default:""},clientOnly:{type:Boolean,default:!1},objectId:{type:[String,Number,Object],default:null}},computed:{running:function(){var t=this.$store.state.radios,e=t.current;return!!t.running&&(e.type===this.type&&s["a"].isEqual(e.objectId,this.objectId)&&e.customRadioId===this.customRadioId)}},methods:{toggleRadio:function(){this.running?this.$store.dispatch("radios/stop"):this.$store.dispatch("radios/start",{type:this.type,objectId:this.objectId,customRadioId:this.customRadioId,clientOnly:this.clientOnly})}}},o=n,l=a("2877"),c=Object(l["a"])(o,r,i,!1,null,null,null);e["a"]=c.exports},f167:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.track?r("div",[r("section",{staticClass:"ui vertical stripe segment"},[r("div",{staticClass:"ui stackable grid row container"},[r("div",{staticClass:"six wide column"},[t.upload?[t.track.cover&&t.track.cover.urls.large_square_crop?r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.track.cover.urls.large_square_crop),expression:"$store.getters['instance/absoluteUrl'](track.cover.urls.large_square_crop)"}],staticClass:"ui fluid image track-cover-image",attrs:{alt:"Cover Image"}}):t.track.album&&t.track.album.cover&&t.track.album.cover.urls.large_square_crop?r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.track.album.cover.urls.large_square_crop),expression:"$store.getters['instance/absoluteUrl'](track.album.cover.urls.large_square_crop)"}],staticClass:"ui fluid image track-cover-image",attrs:{alt:"Cover Image"}}):r("img",{staticClass:"ui fluid image track-cover-image",attrs:{src:a("271e"),alt:"Cover Image"}}),r("h3",{staticClass:"ui header"},["music"===t.track.artist.content_category?r("translate",{key:"1",attrs:{"translate-context":"Content/*/*"}},[t._v(" Track Details ")]):r("translate",{key:"2",attrs:{"translate-context":"Content/*/*"}},[t._v(" Episode Details ")])],1),r("table",{staticClass:"ui basic table"},[r("tbody",[r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v(" Duration ")])],1),r("td",{staticClass:"right aligned"},[t.upload.duration?[t._v(" "+t._s(t._f("duration")(t.upload.duration))+" ")]:r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])],2)]),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v(" Size ")])],1),r("td",{staticClass:"right aligned"},[t.upload.size?[t._v(" "+t._s(t._f("humanSize")(t.upload.size))+" ")]:r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])],2)]),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v(" Codec ")])],1),r("td",{staticClass:"right aligned"},[t.upload.extension?[t._v(" "+t._s(t.upload.extension)+" ")]:r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])],2)]),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/Track/*/Noun"}},[t._v(" Bitrate ")])],1),r("td",{staticClass:"right aligned"},[t.upload.bitrate?[t._v(" "+t._s(t._f("humanSize")(t.upload.bitrate))+"/s ")]:r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])],2)]),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v(" Downloads ")])],1),r("td",{staticClass:"right aligned"},[t._v(" "+t._s(t.track.downloads_count)+" ")])])])])]:t._e()],2),r("div",{staticClass:"ten wide column"},[t.track.tags&&t.track.tags.length>0?[r("tags-list",{attrs:{tags:t.track.tags}}),r("div",{staticClass:"ui hidden divider"})]:t._e(),r("rendered-description",{attrs:{content:t.track.description,"can-update":!1}}),r("h2",{staticClass:"ui header"},[r("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v(" Release Details ")])],1),r("table",{staticClass:"ui basic table ellipsis-rows"},[r("tbody",[r("tr",[r("td",[r("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v(" Artist ")])],1),r("td",{staticClass:"right aligned"},[r("router-link",{attrs:{to:{name:"library.artists.detail",params:{id:t.track.artist.id}}}},[t._v(" "+t._s(t.track.artist.name)+" ")])],1)]),t.track.album?r("tr",[r("td",["music"===t.track.album.artist.content_category?r("translate",{key:"1",attrs:{"translate-context":"*/*/*/Noun"}},[t._v(" Album ")]):r("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v(" Serie ")])],1),r("td",{staticClass:"right aligned"},[r("router-link",{attrs:{to:{name:"library.albums.detail",params:{id:t.track.album.id}}}},[t._v(" "+t._s(t.track.album.title)+" ")])],1)]):t._e(),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" Year ")])],1),r("td",{staticClass:"right aligned"},[t.track.album&&t.track.album.release_date?[t._v(" "+t._s(t._f("moment")(t.track.album.release_date,"Y"))+" ")]:[r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])]],2)]),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/Track/*/Noun"}},[t._v(" Copyright ")])],1),r("td",{staticClass:"right aligned"},[t.track.copyright?r("span",{attrs:{title:t.track.copyright}},[t._v(t._s(t._f("truncate")(t.track.copyright,50)))]):[r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])]],2)]),r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v(" License ")])],1),r("td",{staticClass:"right aligned"},[t.license?r("a",{attrs:{href:t.license.url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.license.name))]):r("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" N/A ")])],1)]),t.track.is_local?t._e():r("tr",[r("td",[r("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v(" URL ")])],1),r("td",{attrs:{title:t.track.fid}},[r("a",{attrs:{href:t.track.fid,target:"_blank",rel:"noopener noreferrer"}},[t._v(" "+t._s(t._f("truncate")(t.track.fid,65))+" ")])])])])]),t.musicbrainzUrl?r("a",{attrs:{href:t.musicbrainzUrl,target:"_blank",rel:"noreferrer noopener"}},[r("i",{staticClass:"external icon"}),r("translate",{attrs:{"translate-context":"Content/*/*/Clickable, Verb"}},[t._v("View on MusicBrainz")])],1):t._e(),r("h2",{staticClass:"ui header"},[r("translate",{attrs:{"translate-context":"Content/*/Title/Noun"}},[t._v(" Related Playlists ")])],1),r("playlist-widget",{attrs:{url:"playlists/",filters:{track:t.track.id,playable:!0,ordering:"-modification_date"}}}),r("h2",{staticClass:"ui header"},[r("translate",{attrs:{"translate-context":"Content/*/Title/Noun"}},[t._v(" Related Libraries ")])],1),r("library-widget",{attrs:{url:"tracks/"+t.id+"/libraries/"},on:{loaded:function(e){return t.$emit("libraries-loaded",e)}}},[r("translate",{attrs:{slot:"subtitle","translate-context":"Content/Track/Paragraph"},slot:"subtitle"},[t._v(" This track is present in the following libraries: ")])],1)],2)])])]):t._e()},i=[],s=a("bc3a"),n=a.n(s),o=a("06cd"),l=a("6b08"),c=a("773e"),u={components:{LibraryWidget:o["a"],TagsList:l["a"],PlaylistWidget:c["a"]},props:{track:{type:Object,required:!0},libraries:{type:Array,default:null}},data:function(){return{id:this.track.id,licenseData:null}},computed:{labels:function(){return{title:this.$pgettext("*/*/*/Noun","Track")}},musicbrainzUrl:function(){return this.track.mbid?"https://musicbrainz.org/recording/"+this.track.mbid:null},upload:function(){return this.track.uploads?this.track.uploads[0]:null},license:function(){return this.track&&this.track.license?this.licenseData:null},cover:function(){return this.track.cover&&this.track.cover.urls.original?this.track.cover:this.track.album&&this.track.album.cover?this.track.album.cover:null}},watch:{track:function(t){t&&t.license&&this.fetchLicenseData(t.license)}},created:function(){this.track&&this.track.license&&this.fetchLicenseData(this.track.license)},methods:{fetchLicenseData:function(t){var e=this,a="licenses/".concat(t);n.a.get(a).then((function(t){e.licenseData=t.data}))}}},d=u,p=a("2877"),f=Object(p["a"])(d,r,i,!1,null,null,null);e["default"]=f.exports},fb6c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.track?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.track.title,expression:"track.title"}],class:["ui","head","vertical","center","aligned","stripe","segment"]},[a("div",{staticClass:"ui basic padded segment"},[a("div",{staticClass:"ui stackable grid row container"},[a("div",{staticClass:"eight wide left aligned column"},[a("h1",{staticClass:"ui header"},[t._v(" "+t._s(t.track.title)+" "),a("div",{staticClass:"sub header",domProps:{innerHTML:t._s(t.subtitle)}})])]),a("div",{staticClass:"eight wide right aligned column button-group"},[a("play-button",{staticClass:"vibrant",attrs:{track:t.track}},[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v(" Play ")])],1),t._v("   "),t.$store.state.auth.authenticated?a("track-favorite-icon",{attrs:{border:!0,track:t.track}}):t._e(),t.$store.state.auth.authenticated?a("track-playlist-icon",{staticClass:"circular",attrs:{border:!0,track:t.track}}):t._e(),t.upload?a("a",{staticClass:"ui basic circular icon button",attrs:{role:"button","aria-label":t.labels.download,href:t.downloadUrl,target:"_blank",title:t.labels.download}},[a("i",{staticClass:"download icon"})]):t._e(),t.isEmbedable?a("modal",{attrs:{show:t.showEmbedModal},on:{"update:show":function(e){t.showEmbedModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Track/Title"}},[t._v(" Embed this track on your website ")])],1),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[a("embed-wizard",{attrs:{id:t.track.id,type:"track"}})],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v(" Cancel ")])],1)])]):t._e(),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown",value:{direction:"downward"},expression:"{direction: 'downward'}"}],staticClass:"ui floating dropdown circular icon basic button",attrs:{title:t.labels.more}},[a("i",{staticClass:"ellipsis vertical icon"}),a("div",{staticClass:"menu",staticStyle:{right:"0",left:"auto"}},[t.domain!=t.$store.getters["instance/domain"]?a("a",{staticClass:"basic item",attrs:{href:t.track.fid,target:"_blank"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-params":{domain:t.domain},"translate-context":"Content/*/Button.Label/Verb"}},[t._v("View on %{ domain }")])],1):t._e(),t.isEmbedable?a("div",{staticClass:"basic item",attrs:{role:"button"},on:{click:function(e){t.showEmbedModal=!t.showEmbedModal}}},[a("i",{staticClass:"code icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v(" Embed ")])],1):t._e(),a("a",{staticClass:"basic item",attrs:{href:t.wikipediaUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"wikipedia w icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Search on Wikipedia")])],1),t.discogsUrl?a("a",{staticClass:"basic item",attrs:{href:t.discogsUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Search on Discogs")])],1):t._e(),t.track.is_local?a("router-link",{staticClass:"basic item",attrs:{to:{name:"library.tracks.edit",params:{id:t.track.id}}}},[a("i",{staticClass:"edit icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v(" Edit ")])],1):t._e(),t.artist&&t.$store.state.auth.authenticated&&t.artist.channel&&t.artist.attributed_to.full_username===t.$store.state.auth.fullUsername?a("dangerous-button",{class:["ui",{loading:t.isLoading},"item"],on:{confirm:function(e){return t.remove()}}},[a("i",{staticClass:"ui trash icon"}),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v(" Delete… ")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title"}},[t._v(" Delete this track? ")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v(" The track will be deleted, as well as any related files and data. This action is irreversible. ")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v(" Delete ")])],1)],1):t._e(),a("div",{staticClass:"divider"}),t._l(t.getReportableObjs({track:t.track}),(function(e){return a("div",{key:e.target.type+e.target.id,staticClass:"basic item",attrs:{role:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),a("div",{staticClass:"divider"}),t.$store.state.auth.availablePermissions["library"]?a("router-link",{staticClass:"basic item",attrs:{to:{name:"manage.library.tracks.detail",params:{id:t.track.id}}}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v(" Open in moderation interface ")])],1):t._e(),t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/track/"+t.track.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")]),t._v("  ")],1):t._e()],2)])],1)])])]),t.track?a("router-view",{key:t.$route.fullPath,attrs:{track:t.track,object:t.track,"object-type":"track"},on:{"libraries-loaded":function(e){t.libraries=e}}}):t._e()]:t._e()],2)},i=[],s=(a("ac1f"),a("5319"),a("a9e3"),a("4de4"),a("d3b7"),a("cadb")),n=a("bc3a"),o=a.n(n),l=a("4b90"),c=a("025e"),u=a("3677"),d=a("a3e6"),p=a("4389"),f=a("4c04"),h=a("404d"),b=a("21a2"),v=a("add5"),m=a("98fc"),g="tracks/";function y(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var _={components:{PlayButton:d["a"],TrackPlaylistIcon:f["default"],TrackFavoriteIcon:p["default"],Modal:h["default"],EmbedWizard:b["a"]},mixins:[v["a"]],props:{id:{type:[String,Number],required:!0}},data:function(){return{time:s["a"],isLoading:!0,track:null,artist:null,showEmbedModal:!1,libraries:[]}},computed:{domain:function(){return this.track?Object(c["b"])(this.track.fid):null},publicLibraries:function(){return this.libraries.filter((function(t){return"everyone"===t.privacy_level}))},isEmbedable:function(){var t=this;return t.artist&&t.artist.channel&&t.artist.channel.actor||this.publicLibraries.length>0},upload:function(){return this.track.uploads?this.track.uploads[0]:null},labels:function(){return{title:this.$pgettext("*/*/*/Noun","Track"),download:this.$pgettext("Content/Track/Link/Verb","Download"),more:this.$pgettext("*/*/Button.Label/Noun","More…")}},wikipediaUrl:function(){return"https://en.wikipedia.org/w/index.php?search="+encodeURI(this.track.title+" "+this.track.artist.name)},discogsUrl:function(){return this.track.album?"https://discogs.com/search/?type=release&title="+encodeURI(this.track.album.title)+"&artist="+encodeURI(this.track.artist.name)+"&track="+encodeURI(this.track.title):null},downloadUrl:function(){var t=this.$store.getters["instance/absoluteUrl"](this.upload.listen_url);if(this.$store.state.auth.authenticated){var e="jwt",a=this.$store.state.auth.token;this.$store.state.auth.scopedTokens&&this.$store.state.auth.scopedTokens.listen&&(e="token",a=this.$store.state.auth.scopedTokens.listen),t=l["a"].updateQueryString(t,e,encodeURI(a))}return t},attributedToUrl:function(){var t=this.$router.resolve({name:"profile.full.overview",params:{username:this.track.attributed_to.preferred_username,domain:this.track.attributed_to.domain}});return t.href},albumUrl:function(){var t=this.$router.resolve({name:"library.albums.detail",params:{id:this.track.album.id}});return t.href},artistUrl:function(){var t=this.$router.resolve({name:"library.artists.detail",params:{id:this.track.artist.id}});return t.href},headerStyle:function(){return this.cover&&this.cover.urls.original?"background-image: url("+this.$store.getters["instance/absoluteUrl"](this.cover.urls.original)+")":""},subtitle:function(){var t;return this.track.attributed_to?(t=this.$pgettext("Content/Track/Paragraph",'Uploaded by <a class="internal" href="%{ uploaderUrl }">%{ uploader }</a> on <time title="%{ date }" datetime="%{ date }">%{ prettyDate }</time>'),this.$gettextInterpolate(t,{uploaderUrl:this.attributedToUrl,uploader:y("@".concat(this.track.attributed_to.full_username)),date:y(this.track.creation_date),prettyDate:y(Object(m["b"])(this.track.creation_date,"LL"))})):(t=this.$pgettext("Content/Track/Paragraph",'Uploaded on <time title="%{ date }" datetime="%{ date }">%{ prettyDate }</time>'),this.$gettextInterpolate(t,{date:y(this.track.creation_date),prettyDate:y(Object(m["b"])(this.track.creation_date,"LL"))}))}},watch:{id:function(){this.fetchData()}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e=g+this.id+"/";u["a"].default.debug('Fetching track "'+this.id+'"'),o.a.get(e,{params:{refresh:"true"}}).then((function(e){t.track=e.data,o.a.get("artists/".concat(e.data.artist.id,"/")).then((function(e){t.artist=e.data})),t.isLoading=!1}))},remove:function(){var t=this,e=this;e.isLoading=!0,o.a.delete("tracks/".concat(this.track.id)).then((function(a){e.isLoading=!1,e.$emit("deleted"),e.$router.push({name:"library.artists.detail",params:{id:t.artist.id}})}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}}},k=_,C=a("2877"),w=Object(C["a"])(k,r,i,!1,null,null,null);e["default"]=w.exports}}]);