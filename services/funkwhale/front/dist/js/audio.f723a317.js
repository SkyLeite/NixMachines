(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["audio"],{"0580":function(e,t){var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],r=n.join(","),a="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function o(e,t){t=t||{};var n,o,s,u=[],l=[],c=e.querySelectorAll(r);for(t.includeContainer&&a.call(e,r)&&(c=Array.prototype.slice.apply(c),c.unshift(e)),n=0;n<c.length;n++)o=c[n],i(o)&&(s=d(o),0===s?u.push(o):l.push({documentOrder:n,tabIndex:s,node:o}));var f=l.sort(p).map((function(e){return e.node})).concat(u);return f}function i(e){return!(!u(e)||v(e)||d(e)<0)}function s(e){if(!e)throw new Error("No node provided");return!1!==a.call(e,r)&&i(e)}function u(e){return!(e.disabled||m(e)||b(e))}o.isTabbable=s,o.isFocusable=c;var l=n.concat("iframe").join(",");function c(e){if(!e)throw new Error("No node provided");return!1!==a.call(e,l)&&u(e)}function d(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?f(e)?0:e.tabIndex:t}function p(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function f(e){return"true"===e.contentEditable}function _(e){return"INPUT"===e.tagName}function m(e){return _(e)&&"hidden"===e.type}function h(e){return _(e)&&"radio"===e.type}function v(e){return h(e)&&!g(e)}function y(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}function g(e){if(!e.name)return!0;var t=e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'),n=y(t);return!n||n===e}function b(e){return null===e.offsetParent||"hidden"===getComputedStyle(e).visibility}e.exports=o},"1e5c":function(e,t,n){(function(n){var r,a;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||_(),"undefined"!==typeof e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),a=0;a<r.length;a++){var o=t._howls[n]._soundById(r[a]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||i;t.ctx||_(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),a=0;a<r.length;a++){var o=t._howls[n]._soundById(r[a]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||i,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||i,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&"undefined"!==typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,_()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!==typeof Audio)try{var t=new Audio;"undefined"===typeof t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}else e.noAudio=!0;try{t=new Audio;t.muted&&(e.noAudio=!0)}catch(n){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,t=null;try{t="undefined"!==typeof Audio?new Audio:null}catch(c){return e}if(!t||"function"!==typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",a=r.match(/OPR\/([0-6].)/g),o=a&&parseInt(a[0].split("/")[1],10)<33,s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),u=r.match(/Version\/(.*?) /),l=s&&u&&parseInt(u[1],10)<15;return e._codecs={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){while(e._html5AudioPool.length<e.html5PoolSize)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0;break}for(var a=0;a<e._howls.length;a++)if(!e._howls[a]._webAudio)for(var o=e._howls[a]._getSoundIds(),i=0;i<o.length;i++){var s=e._howls[a]._soundById(o[i]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),"undefined"===typeof u.start?u.noteOn(0):u.start(0),"function"===typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!==typeof Promise&&(t instanceof Promise||"function"===typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||i;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!==typeof e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!==typeof e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var i=new o,s=function(e){var t=this;e.src&&0!==e.src.length?t.init(e):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var t=this;return i.ctx||_(),t._autoplay=e.autoplay||!1,t._format="string"!==typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!==typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!==typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=i.usingWebAudio&&!t._html5,"undefined"!==typeof i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(i.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"===typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var r,a;if(e._format&&e._format[n])r=e._format[n];else{if(a=e._src[n],"string"!==typeof a){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=/^data:audio\/([^;,]+);/i.exec(a),r||(r=/\.([^.]+)$/.exec(a.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&i.codecs(r)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new u(e),e._webAudio&&c(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"===typeof e)r=e,e=null;else{if("string"===typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if("undefined"===typeof e&&(e="__default",!n._playLock)){for(var a=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(a++,r=n._sounds[o]._id);1===a?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&i._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),d=1e3*c/Math.abs(s._rate),p=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var _=function(){s._paused=!1,s._seek=l,s._start=p,s._stop=f,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(l>=f)){var m=s._node;if(n._webAudio){var h=function(){n._playLock=!1,_(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,i.ctx.currentTime),s._playStart=i.ctx.currentTime,"undefined"===typeof m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,c):s._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,c),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?h():(n._playLock=!0,n.once("resume",h),n._clearTimer(s._id))}else{var v=function(){m.currentTime=l,m.muted=s._muted||n._muted||i._muted||m.muted,m.volume=s._volume*i.volume(),m.playbackRate=s._rate;try{var r=m.play();if(r&&"undefined"!==typeof Promise&&(r instanceof Promise||"function"===typeof r.then)?(n._playLock=!0,_(),r.then((function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,_(),n._emit("play",s._id)),m.playbackRate=s._rate,m.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1)},m.addEventListener("ended",n._endTimers[s._id],!1))}catch(a){n._emit("playerror",s._id,a)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var y=window&&window.ejecta||!m.readyState&&i._navigator.isCocoonJS;if(m.readyState>=3||y)v();else{n._playLock=!0,n._state="loading";var g=function(){n._state="loaded",v(),m.removeEventListener(i._canPlayEvent,g,!1)};m.addEventListener(i._canPlayEvent,g,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var a=t._soundById(n[r]);if(a&&!a._paused&&(a._seek=t.seek(n[r]),a._rateSeek=0,a._paused=!0,t._stopFade(n[r]),a._node))if(t._webAudio){if(!a._node.bufferSource)continue;"undefined"===typeof a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),t._cleanBuffer(a._node)}else isNaN(a._node.duration)&&a._node.duration!==1/0||a._node.pause();arguments[1]||t._emit("pause",a?a._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),a=0;a<r.length;a++){n._clearTimer(r[a]);var o=n._soundById(r[a]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[a]),o._node&&(n._webAudio?o._node.bufferSource&&("undefined"===typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if("undefined"===typeof t){if("boolean"!==typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),a=0;a<r.length;a++){var o=n._soundById(r[a]);o&&(o._muted=e,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,i.ctx.currentTime):o._node&&(o._node.muted=!!i._muted||e),n._emit("mute",o._id))}return n},volume:function(){var e,t,n,r=this,a=arguments;if(0===a.length)return r._volume;if(1===a.length||2===a.length&&"undefined"===typeof a[1]){var o=r._getSoundIds(),s=o.indexOf(a[0]);s>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else a.length>=2&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(!("undefined"!==typeof e&&e>=0&&e<=1))return n=t?r._soundById(t):r._sounds[0],n?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;"undefined"===typeof t&&(r._volume=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++)n=r._soundById(t[u]),n&&(n._volume=e,a[2]||r._stopFade(t[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,i.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*i.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,t,n,r)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),a.volume(e,r);for(var o=a._getSoundIds(r),s=0;s<o.length;s++){var u=a._soundById(o[s]);if(u){if(r||a._stopFade(o[s]),a._webAudio&&!u._muted){var l=i.ctx.currentTime,c=l+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,c)}a._startFadeInterval(u,e,t,n,o[s],"undefined"===typeof r)}}return a},_startFadeInterval:function(e,t,n,r,a,o){var i=this,s=t,u=n-t,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var a=(Date.now()-d)/r;d=Date.now(),s+=u*a,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),i._webAudio?e._volume=s:i.volume(s,e._id,!0),o&&(i._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(n,e._id),i._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,a=arguments;if(0===a.length)return r._loop;if(1===a.length){if("boolean"!==typeof a[0])return n=r._soundById(parseInt(a[0],10)),!!n&&n._loop;e=a[0],r._loop=e}else 2===a.length&&(e=a[0],t=parseInt(a[1],10));for(var o=r._getSoundIds(t),i=0;i<o.length;i++)n=r._soundById(o[i]),n&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(o[i])&&(r.pause(o[i],!0),r.play(o[i],!0)))));return r},rate:function(){var e,t,n,r=this,a=arguments;if(0===a.length)t=r._sounds[0]._id;else if(1===a.length){var o=r._getSoundIds(),s=o.indexOf(a[0]);s>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if("number"!==typeof e)return n=r._soundById(t),n?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;"undefined"===typeof t&&(r._rate=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++)if(n=r._soundById(t[u]),n){r.playing(t[u])&&(n._rateSeek=r.seek(t[u]),n._playStart=r._webAudio?i.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,i.ctx.currentTime):n._node&&(n._node.playbackRate=e);var l=r.seek(t[u]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-l,d=1e3*c/Math.abs(n._rate);!r._endTimers[t[u]]&&n._paused||(r._clearTimer(t[u]),r._endTimers[t[u]]=setTimeout(r._ended.bind(r,n),d)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)n._sounds.length&&(t=n._sounds[0]._id);else if(1===r.length){var a=n._getSoundIds(),o=a.indexOf(r[0]);o>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("undefined"===typeof t)return 0;if("number"===typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(t);if(s){if(!("number"===typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?i.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var d=function(){c&&n.play(t,!0),n._emit("seek",t)};if(c&&!n._webAudio){var p=function(){n._playLock?setTimeout(p,0):d()};setTimeout(p,0)}else d()}return n},playing:function(e){var t=this;if("number"===typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(i._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),i._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=i._howls.indexOf(e);r>=0&&i._howls.splice(r,1);var a=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===e._src||e._src.indexOf(i._howls[n]._src)>=0){a=!1;break}return l&&a&&delete l[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var a=this,o=a["_on"+e];return"function"===typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),a},off:function(e,t,n){var r=this,a=r["_on"+e],o=0;if("number"===typeof t&&(n=t,t=null),t||n)for(o=0;o<a.length;o++){var i=n===a[o].id;if(t===a[o].fn&&i||!t&&i){a.splice(o,1);break}}else if(e)r["_on"+e]=[];else{var s=Object.keys(r);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(r[s[o]])&&(r[s[o]]=[])}return r},once:function(e,t,n){var r=this;return r.on(e,t,n,1),r},_emit:function(e,t,n){for(var r=this,a=r["_on"+e],o=a.length-1;o>=0;o--)a[o].id&&a[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,a[o].fn),0),a[o].once&&r.off(e,a[o].fn,a[o].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),a)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),i._autoSuspend()),t._webAudio||r||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!==typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new u(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){var t=this;if("undefined"===typeof e){for(var n=[],r=0;r<t._sounds.length;r++)n.push(t._sounds[r]._id);return n}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=l[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),t},_cleanBuffer:function(e){var t=this,n=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),n))try{e.bufferSource.buffer=i._scratchBuffer}catch(r){}return e.bufferSource=null,t},_clearSound:function(e){var t=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);t||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var u=function(e){this._parent=e,this.init()};u.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=i._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node="undefined"===typeof i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),e._node.gain.setValueAtTime(n,i.ctx.currentTime),e._node.paused=!0,e._node.connect(i.masterGain)):i.noAudio||(e._node=i._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(i._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*i.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(i._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},c=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void f(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);p(r.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){o.setRequestHeader(t,e._xhr.headers[t])})),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?p(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},d(o)}},d=function(e){try{e.send()}catch(t){e.onerror()}},p=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(l[t._src]=e,f(t,e)):n()};"undefined"!==typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(r).catch(n):i.ctx.decodeAudioData(e,r,n)},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},_=function(){if(i.usingWebAudio){try{"undefined"!==typeof AudioContext?i.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(a){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),t=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!r&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain="undefined"===typeof i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};r=[],a=function(){return{Howler:i,Howl:s}}.apply(t,r),void 0===a||(e.exports=a),t.Howler=i,t.Howl=s,"undefined"!==typeof n?(n.HowlerGlobal=o,n.Howler=i,n.Howl=s,n.Sound=u):"undefined"!==typeof window&&(window.HowlerGlobal=o,window.Howler=i,window.Howl=s,window.Sound=u)})(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!==typeof t?r._pos[1]:t,n="number"!==typeof n?r._pos[2]:n,"number"!==typeof e?r._pos:(r._pos=[e,t,n],"undefined"!==typeof r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,a,o){var i=this;if(!i.ctx||!i.ctx.listener)return i;var s=i._orientation;return t="number"!==typeof t?s[1]:t,n="number"!==typeof n?s[2]:n,r="number"!==typeof r?s[3]:r,a="number"!==typeof a?s[4]:a,o="number"!==typeof o?s[5]:o,"number"!==typeof e?s:(i._orientation=[e,t,n,r,a,o],"undefined"!==typeof i.ctx.listener.forwardX?(i.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),i.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),i.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),i.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):i.ctx.listener.setOrientation(e,t,n,r,a,o),i)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!==typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!==typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!==typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!==typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!==typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!==typeof t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var a="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof n){if("number"!==typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),i=0;i<o.length;i++){var s=r._soundById(o[i]);if(s){if("number"!==typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,a),"spatial"===a?"undefined"!==typeof s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,a){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,a)}}),o;if(n="number"!==typeof n?0:n,r="number"!==typeof r?-.5:r,"undefined"===typeof a){if("number"!==typeof t)return o._pos;o._pos=[t,n,r]}for(var i=o._getSoundIds(a),s=0;s<i.length;s++){var u=o._soundById(i[s]);if(u){if("number"!==typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),"undefined"!==typeof u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(t,n,r,a){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,a)}}),o;if(n="number"!==typeof n?o._orientation[1]:n,r="number"!==typeof r?o._orientation[2]:r,"undefined"===typeof a){if("number"!==typeof t)return o._orientation;o._orientation=[t,n,r]}for(var i=o._getSoundIds(a),s=0;s<i.length;s++){var u=o._soundById(i[s]);if(u){if("number"!==typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),"undefined"!==typeof u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,a=this,o=arguments;if(!a._webAudio)return a;if(0===o.length)return a._pannerAttr;if(1===o.length){if("object"!==typeof o[0])return r=a._soundById(parseInt(o[0],10)),r?r._pannerAttr:a._pannerAttr;t=o[0],"undefined"===typeof n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),a._pannerAttr={coneInnerAngle:"undefined"!==typeof t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:a._coneInnerAngle,coneOuterAngle:"undefined"!==typeof t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:a._coneOuterAngle,coneOuterGain:"undefined"!==typeof t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:a._coneOuterGain,distanceModel:"undefined"!==typeof t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:a._distanceModel,maxDistance:"undefined"!==typeof t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:a._maxDistance,refDistance:"undefined"!==typeof t.pannerAttr.refDistance?t.pannerAttr.refDistance:a._refDistance,rolloffFactor:"undefined"!==typeof t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:a._rolloffFactor,panningModel:"undefined"!==typeof t.pannerAttr.panningModel?t.pannerAttr.panningModel:a._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var i=a._getSoundIds(n),s=0;s<i.length;s++)if(r=a._soundById(i[s]),r){var u=r._pannerAttr;u={coneInnerAngle:"undefined"!==typeof t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!==typeof t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!==typeof t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!==typeof t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:"undefined"!==typeof t.maxDistance?t.maxDistance:u.maxDistance,refDistance:"undefined"!==typeof t.refDistance?t.refDistance:u.refDistance,rolloffFactor:"undefined"!==typeof t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:"undefined"!==typeof t.panningModel?t.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=a._pos||[0,0,-.5]),e(r,"spatial"))}return a},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,"undefined"!==typeof e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),"undefined"!==typeof e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n("c8ba"))},"25f0":function(e,t,n){"use strict";var r=n("e330"),a=n("5e77").PROPER,o=n("6eeb"),i=n("825a"),s=n("3a9b"),u=n("577e"),l=n("d039"),c=n("ad6d"),d="toString",p=RegExp.prototype,f=p[d],_=r(c),m=l((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=a&&f.name!=d;(m||h)&&o(RegExp.prototype,d,(function(){var e=i(this),t=u(e.source),n=e.flags,r=u(void 0===n&&s(p,e)&&!("flags"in p)?_(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2626:function(e,t,n){"use strict";var r=n("d066"),a=n("9bf2"),o=n("b622"),i=n("83ab"),s=o("species");e.exports=function(e){var t=r(e),n=a.f;i&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},"271e":function(e,t,n){e.exports=n.p+"img/default-cover.89d13c2f.png"},2739:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currentTrack?r("section",{staticClass:"player-wrapper ui bottom-player component-player",attrs:{role:"complementary","aria-labelledby":"player-label"}},[r("h1",{staticClass:"visually-hidden",attrs:{id:"player-label"}},[r("translate",{attrs:{"translate-context":"*/*/*"}},[e._v(" Audio player and controls ")])],1),r("div",{staticClass:"ui inverted segment fixed-controls",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleMobilePlayer.apply(null,arguments)}}},[r("div",{class:["ui","top attached","small","inverted",{indicating:e.isLoadingAudio},"progress"]},[r("div",{staticClass:"buffer bar",style:{width:e.bufferProgress+"%"},attrs:{"data-percent":e.bufferProgress}}),r("div",{staticClass:"position bar",style:{width:e.progress+"%"},attrs:{"data-percent":e.progress}})]),r("div",{staticClass:"controls-row"},[r("div",{staticClass:"controls track-controls queue-not-focused desktop-and-up"},[r("div",{staticClass:"ui tiny image",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$router.push({name:"library.tracks.detail",params:{id:e.currentTrack.id}})}}},[e.currentTrack.cover&&e.currentTrack.cover.urls.original?r("img",{ref:"cover",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](e.currentTrack.cover.urls.medium_square_crop)}}):e.currentTrack.album&&e.currentTrack.album.cover&&e.currentTrack.album.cover.urls&&e.currentTrack.album.cover.urls.original?r("img",{ref:"cover",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](e.currentTrack.album.cover.urls.medium_square_crop)}}):r("img",{attrs:{alt:"",src:n("271e")}})]),r("div",{staticClass:"middle aligned content ellipsis",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[r("strong",[r("router-link",{staticClass:"small header discrete link track",attrs:{to:{name:"library.tracks.detail",params:{id:e.currentTrack.id}}},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" "+e._s(e.currentTrack.title)+" ")])],1),r("div",{staticClass:"meta"},[r("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.artists.detail",params:{id:e.currentTrack.artist.id}}},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" "+e._s(e.currentTrack.artist.name)+" ")]),e.currentTrack.album?[e._v(" / "),r("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.albums.detail",params:{id:e.currentTrack.album.id}}},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" "+e._s(e.currentTrack.album.title)+" ")])]:e._e()],2)])]),r("div",{staticClass:"controls track-controls queue-not-focused tablet-and-below"},[r("div",{staticClass:"ui tiny image"},[e.currentTrack.cover&&e.currentTrack.cover.urls.original?r("img",{ref:"cover",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](e.currentTrack.cover.urls.medium_square_crop)}}):e.currentTrack.album&&e.currentTrack.album.cover&&e.currentTrack.album.cover.urls.original?r("img",{ref:"cover",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](e.currentTrack.album.cover.urls.medium_square_crop)}}):r("img",{attrs:{alt:"",src:n("271e")}})]),r("div",{staticClass:"middle aligned content ellipsis"},[r("strong",[e._v(" "+e._s(e.currentTrack.title)+" ")]),r("div",{staticClass:"meta"},[e._v(" "+e._s(e.currentTrack.artist.name)),e.currentTrack.album?[e._v(" / "+e._s(e.currentTrack.album.title)+" ")]:e._e()],2)])]),e.$store.state.auth.authenticated?r("div",{staticClass:"controls desktop-and-up fluid align-right"},[r("track-favorite-icon",{staticClass:"control white",attrs:{track:e.currentTrack}}),r("track-playlist-icon",{staticClass:"control white",attrs:{track:e.currentTrack}}),r("button",{class:["ui","really","basic","circular","icon","button","control"],attrs:{"aria-label":e.labels.addArtistContentFilter,title:e.labels.addArtistContentFilter},on:{click:function(t){return e.$store.dispatch("moderation/hide",{type:"artist",target:e.currentTrack.artist})}}},[r("i",{class:["eye slash outline","basic","icon"]})])],1):e._e(),r("div",{staticClass:"player-controls controls queue-not-focused"},[r("button",{staticClass:"circular button control tablet-and-up",attrs:{title:e.labels.previous,"aria-label":e.labels.previous,disabled:!e.hasPrevious},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.dispatch("queue/previous")}}},[r("i",{class:["ui","large",{disabled:!e.hasPrevious},"backward step","icon"]})]),e.playing?r("button",{staticClass:"circular button control",attrs:{title:e.labels.pause,"aria-label":e.labels.pause},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.pausePlayback.apply(null,arguments)}}},[r("i",{class:["ui","big","pause",{disabled:!e.currentTrack},"icon"]})]):r("button",{staticClass:"circular button control",attrs:{title:e.labels.play,"aria-label":e.labels.play},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.resumePlayback.apply(null,arguments)}}},[r("i",{class:["ui","big","play",{disabled:!e.currentTrack},"icon"]})]),r("button",{staticClass:"circular button control",attrs:{title:e.labels.next,"aria-label":e.labels.next,disabled:!e.hasNext},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.dispatch("queue/next")}}},[r("i",{class:["ui","large",{disabled:!e.hasNext},"forward step","icon"]})])]),r("div",{staticClass:"controls progress-controls queue-not-focused tablet-and-up small align-left"},[r("div",{staticClass:"timer"},[e.isLoadingAudio?e._e():[r("span",{staticClass:"start",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.setCurrentTime(0)}}},[e._v(e._s(e.currentTimeFormatted))]),e._v(" | "),r("span",{staticClass:"total"},[e._v(e._s(e.durationFormatted))])]],2)]),r("div",{staticClass:"controls queue-controls when-queue-focused align-right"},[r("div",{staticClass:"group"},[r("volume-control",{staticClass:"expandable"}),0===e.looping?r("button",{staticClass:"circular control button",attrs:{title:e.labels.loopingDisabled,"aria-label":e.labels.loopingDisabled,disabled:!e.currentTrack},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.commit("player/looping",1)}}},[r("i",{class:["ui",{disabled:!e.currentTrack},"step","repeat","icon"]})]):e._e(),1===e.looping?r("button",{staticClass:"looping circular control button",attrs:{title:e.labels.loopingSingle,"aria-label":e.labels.loopingSingle,disabled:!e.currentTrack},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.commit("player/looping",2)}}},[e._m(0)]):e._e(),2===e.looping?r("button",{staticClass:"looping circular control button",attrs:{title:e.labels.loopingWhole,"aria-label":e.labels.loopingWhole,disabled:!e.currentTrack},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.commit("player/looping",0)}}},[e._m(1)]):e._e(),r("button",{staticClass:"circular control button",attrs:{disabled:0===e.queue.tracks.length,title:e.labels.shuffle,"aria-label":e.labels.shuffle},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.shuffle()}}},[e.isShuffling?r("div",{staticClass:"ui inline shuffling inverted tiny active loader"}):r("i",{class:["ui","random",{disabled:0===e.queue.tracks.length},"icon"]})])],1),r("div",{staticClass:"group"},[r("div",{staticClass:"fake-dropdown"},[r("button",{staticClass:"position circular control button desktop-and-up",attrs:{"aria-expanded":"true"},on:{click:function(t){return t.stopPropagation(),e.toggleMobilePlayer.apply(null,arguments)}}},[r("i",{staticClass:"stream icon"}),r("translate",{attrs:{"translate-context":"Sidebar/Queue/Text","translate-params":{index:e.queue.currentIndex+1,length:e.queue.tracks.length}}},[e._v(" %{ index } of %{ length } ")])],1),r("button",{staticClass:"position circular control button tablet-and-below",on:{click:function(t){return t.stopPropagation(),e.switchTab.apply(null,arguments)}}},[r("i",{staticClass:"stream icon"}),r("translate",{attrs:{"translate-context":"Sidebar/Queue/Text","translate-params":{index:e.queue.currentIndex+1,length:e.queue.tracks.length}}},[e._v(" %{ index } of %{ length } ")])],1),e.$store.state.ui.queueFocused?r("button",{staticClass:"circular control button close-control desktop-and-up",on:{click:function(t){return t.stopPropagation(),e.toggleMobilePlayer.apply(null,arguments)}}},[r("i",{staticClass:"large down angle icon"})]):r("button",{staticClass:"circular control button desktop-and-up",on:{click:function(t){return t.stopPropagation(),e.toggleMobilePlayer.apply(null,arguments)}}},[r("i",{staticClass:"large up angle icon"})]),"player"===e.$store.state.ui.queueFocused?r("button",{staticClass:"circular control button close-control tablet-and-below",on:{click:function(t){return t.stopPropagation(),e.switchTab.apply(null,arguments)}}},[r("i",{staticClass:"large up angle icon"})]):e._e(),"queue"===e.$store.state.ui.queueFocused?r("button",{staticClass:"circular control button tablet-and-below",on:{click:function(t){return t.stopPropagation(),e.switchTab.apply(null,arguments)}}},[r("i",{staticClass:"large down angle icon"})]):e._e()]),r("button",{staticClass:"circular control button close-control tablet-and-below",on:{click:function(t){return t.stopPropagation(),e.$store.commit("ui/queueFocused",null)}}},[r("i",{staticClass:"x icon"})])])])])]),r("GlobalEvents",{on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"p",void 0,t.key,void 0)?null:(t.preventDefault(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.togglePlayback.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.preventDefault(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.$store.commit("ui/queueFocused",null))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:t.ctrlKey&&t.shiftKey?"button"in t&&0!==t.button?null:(t.preventDefault(),t.altKey||t.metaKey?null:e.previous.apply(null,arguments)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:t.ctrlKey&&t.shiftKey?"button"in t&&2!==t.button?null:(t.preventDefault(),t.altKey||t.metaKey?null:e.next.apply(null,arguments)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:t.shiftKey?(t.preventDefault(),t.ctrlKey||t.altKey||t.metaKey?null:e.$store.commit("player/incrementVolume",-.1)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:t.shiftKey?(t.preventDefault(),t.ctrlKey||t.altKey||t.metaKey?null:e.$store.commit("player/incrementVolume",.1)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:(t.preventDefault(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.seek(5))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:(t.preventDefault(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.seek(-5))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:t.shiftKey?"button"in t&&2!==t.button?null:(t.preventDefault(),t.ctrlKey||t.altKey||t.metaKey?null:void e.seek(30)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:t.shiftKey?"button"in t&&0!==t.button?null:(t.preventDefault(),t.ctrlKey||t.altKey||t.metaKey?null:void e.seek(-30)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"m",void 0,t.key,void 0)?null:(t.preventDefault(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.toggleMute.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"l",void 0,t.key,void 0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.$store.commit("player/toggleLooping")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"s",void 0,t.key,void 0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.shuffle.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"f",void 0,t.key,void 0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.$store.dispatch("favorites/toggle",e.currentTrack.id)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"q",void 0,t.key,void 0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.clean.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"e",void 0,t.key,void 0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.toggleMobilePlayer.apply(null,arguments)}]}})],1):e._e()},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{staticClass:"repeat icon"},[n("span",{staticClass:"ui circular tiny vibrant label"},[e._v("1")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{staticClass:"repeat icon"},[n("span",{staticClass:"ui circular tiny vibrant label"},[e._v("∞")])])}],o=n("c7eb"),i=n("1da1"),s=n("5530"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4de4"),n("c975"),n("4160"),n("159b"),n("26e9"),n("2f62")),l=n("fe6c"),c=n("c91d"),d=n("1e5c"),p=n("ceb5"),f=n("4b90"),_=n("bc3a"),m=n.n(_),h={components:{VolumeControl:function(){return n.e("audio").then(n.bind(null,"43a5"))},TrackFavoriteIcon:function(){return Promise.all([n.e("auth-audio~auth-libraries"),n.e("auth-audio")]).then(n.bind(null,"4389"))},TrackPlaylistIcon:function(){return Promise.all([n.e("auth-audio~auth-libraries"),n.e("auth-audio")]).then(n.bind(null,"4c04"))},GlobalEvents:l["a"]},data:function(){return{isShuffling:!1,sliderVolume:this.volume,showVolume:!1,currentSound:null,dummyAudio:null,isUpdatingTime:!1,sourceErrors:0,progressInterval:null,maxPreloaded:3,preloadDelay:15,listenDelay:15,listeningIsSubmitted:!1,soundsCache:[],soundId:null,playTimeout:null,nextTrackPreloaded:!1}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["d"])({currentIndex:function(e){return e.queue.currentIndex},playing:function(e){return e.player.playing},isLoadingAudio:function(e){return e.player.isLoadingAudio},volume:function(e){return e.player.volume},looping:function(e){return e.player.looping},duration:function(e){return e.player.duration},bufferProgress:function(e){return e.player.bufferProgress},errored:function(e){return e.player.errored},currentTime:function(e){return e.player.currentTime},queue:function(e){return e.queue}})),Object(u["c"])({currentTrack:"queue/currentTrack",hasNext:"queue/hasNext",hasPrevious:"queue/hasPrevious",emptyQueue:"queue/isEmpty",durationFormatted:"player/durationFormatted",currentTimeFormatted:"player/currentTimeFormatted",progress:"player/progress"})),{},{updateProgressThrottled:function(){return p["a"].throttle(this.updateProgress,50)},labels:function(){var e=this.$pgettext("Sidebar/Player/Hidden text","Media player"),t=this.$pgettext("Sidebar/Player/Icon.Tooltip","Previous track"),n=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Play"),r=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Pause"),a=this.$pgettext("Sidebar/Player/Icon.Tooltip","Next track"),o=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Unmute"),i=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Mute"),s=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Expand queue"),u=this.$pgettext("Sidebar/Player/Icon.Tooltip","Looping disabled. Click to switch to single-track looping."),l=this.$pgettext("Sidebar/Player/Icon.Tooltip","Looping on a single track. Click to switch to whole queue looping."),c=this.$pgettext("Sidebar/Player/Icon.Tooltip","Looping on whole queue. Click to disable looping."),d=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Shuffle your queue"),p=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Clear your queue"),f=this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Hide content from this artist…");return{audioPlayer:e,previous:t,play:n,pause:r,next:a,unmute:o,mute:i,loopingDisabled:u,loopingSingle:l,loopingWhole:c,shuffle:d,clear:p,expandQueue:s,addArtistContentFilter:f}}}),watch:{currentTrack:{handler:function(e,t){var n=this;return Object(i["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e!==t){r.next=2;break}return r.abrupt("return");case 2:n.nextTrackPreloaded=!1,clearTimeout(n.playTimeout),n.currentSound&&n.currentSound.pause(),n.$store.commit("player/isLoadingAudio",!0),n.playTimeout=setTimeout(Object(i["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.loadSound(e,t);case 2:case"end":return r.stop()}}),r)}))),100),n.updateMetadata();case 8:case"end":return r.stop()}}),r)})))()},immediate:!1},volume:{immediate:!0,handler:function(e){this.sliderVolume=e,d["Howler"].volume(Object(c["toLinearVolumeScale"])(e))}},sliderVolume:function(e){this.$store.commit("player/volume",e)},playing:function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(t){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.currentSound){e.next=4;break}!0===t?this.soundId=this.currentSound.play(this.soundId):this.currentSound.pause(this.soundId),e.next=6;break;case 4:return e.next=6,this.loadSound(this.currentTrack,null);case 6:this.observeProgress(t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),currentTime:function(e){this.isUpdatingTime||this.setCurrentTime(e),this.isUpdatingTime=!1},emptyQueue:function(e){e&&d["Howler"].unload()}},mounted:function(){this.$store.dispatch("player/updateProgress",0),this.$store.commit("player/playing",!1),this.$store.commit("player/isLoadingAudio",!1),d["Howler"].unload(),this.nextTrackPreloaded=!1,this.dummyAudio=new d["Howl"]({preload:!1,autoplay:!1,src:["noop.webm","noop.mp3"]}),this.currentTrack&&(this.getSound(this.currentTrack),this.updateMetadata()),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",this.resumePlayback),navigator.mediaSession.setActionHandler("pause",this.pausePlayback),navigator.mediaSession.setActionHandler("seekforward",this.seekForward),navigator.mediaSession.setActionHandler("seekbackward",this.seekBackward),navigator.mediaSession.setActionHandler("nexttrack",this.next),navigator.mediaSession.setActionHandler("previoustrack",this.previous))},beforeDestroy:function(){this.dummyAudio.unload(),this.observeProgress(!1)},destroyed:function(){},methods:Object(s["a"])(Object(s["a"])({},Object(u["b"])({resumePlayback:"player/resumePlayback",pausePlayback:"player/pausePlayback",togglePlayback:"player/togglePlayback",mute:"player/mute",unmute:"player/unmute",clean:"queue/clean",toggleMute:"player/toggleMute"})),{},{getTrackData:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.uploads.length){t.next=2;break}return t.abrupt("return",e);case 2:return t.abrupt("return",m.a.get("tracks/".concat(e.id,"/")).then((function(e){return e.data}),(function(){return null})));case 3:case"end":return t.stop()}}),t)})))()},shuffle:function(){var e=0===this.queue.tracks.length;if(!this.isShuffling&&!e){var t=this,n=this.$pgettext("Content/Queue/Message","Queue shuffled!");this.isShuffling=!0,setTimeout((function(){t.$store.dispatch("queue/shuffle",(function(){t.isShuffling=!1,t.$store.commit("ui/addMessage",{content:n,date:new Date})}))}),100)}},next:function(){var e=this;this.$store.dispatch("queue/next").then((function(){e.$emit("next")}))},previous:function(){var e=this;this.$store.dispatch("queue/previous").then((function(){e.$emit("previous")}))},handleError:function(e){e.sound,e.error;this.$store.commit("player/isLoadingAudio",!1),this.$store.dispatch("player/trackErrored")},getSound:function(e){var t=this.getSoundFromCache(e);if(t)return t.sound;var n=this.getSrcs(e),r=this,a=new d["Howl"]({src:n.map((function(e){return e.url})),format:n.map((function(e){return e.type})),autoplay:!1,loop:!1,html5:!0,preload:!0,onend:function(){r.ended()},onunlock:function(){r.$store.state.player.playing&&r.sound&&(r.soundId=r.sound.play(r.soundId))},onload:function(){var e=this,t=this._sounds[0]._node;t.addEventListener("progress",(function(){e===r.currentSound&&r.updateBuffer(t)}))},onplay:function(){if(this===r.currentSound){var e=r.currentSound.seek(),t=r.currentSound.duration();e<=t/2&&(r.listeningIsSubmitted=!1),r.$store.commit("player/isLoadingAudio",!1),r.$store.commit("player/resetErrorCount"),r.$store.commit("player/errored",!1),r.$store.commit("player/duration",this.duration())}else this.stop()},onloaderror:function(e,t){r.removeFromCache(this),this===r.currentSound&&(console.log("Error while playing:",e,t),r.handleError({sound:e,error:t}))}});return this.addSoundToCache(a,e),a},getSrcs:function(e){var t=this,n=document.createElement("audio"),r=["probably","maybe"],a=e.uploads.filter((function(e){var t=n.canPlayType(e.mimetype);return r.indexOf(t)>-1})).map((function(e){return{type:e.extension,url:t.$store.getters["instance/absoluteUrl"](e.listen_url)}}));if(n.remove(),a.push({type:"mp3",url:f["a"].updateQueryString(this.$store.getters["instance/absoluteUrl"](e.listen_url),"to","mp3")}),this.$store.state.auth.authenticated){var o="jwt",i=this.$store.state.auth.token;this.$store.state.auth.scopedTokens&&this.$store.state.auth.scopedTokens.listen&&(o="token",i=this.$store.state.auth.scopedTokens.listen),a.forEach((function(e){e.url=f["a"].updateQueryString(e.url,o,i)}))}return a},updateBuffer:function(e){var t,n=0,r=e.buffered,a=e.currentTime;try{while(!(r.start(n)<=a&&a<=r.end(n)))n+=1}catch(d){return}var o=r.start(n),i=r.end(n);if(0===n){var s=o/e.duration,u=i/e.duration;t=u-s}else{var l=i-o,c=e.duration-o;t=l/c}100*t!==this.bufferProgress&&this.$store.commit("player/bufferProgress",100*t)},updateProgress:function(){if(this.isUpdatingTime=!0,this.currentSound&&"loaded"===this.currentSound.state()){var e=this.currentSound.seek(),t=this.currentSound.duration();this.$store.dispatch("player/updateProgress",e),this.updateBuffer(this.currentSound._sounds[0]._node);var n=this.$store.state.queue.tracks[this.currentIndex+1];!this.nextTrackPreloaded&&n&&!this.getSoundFromCache(n)&&(e>this.preloadDelay||t-e<30)&&(this.getSound(n),this.nextTrackPreloaded=!0),e>t/2&&(this.listeningIsSubmitted||(this.$store.dispatch("player/trackListened",this.currentTrack),this.listeningIsSubmitted=!0))}},seek:function(e){if(e>0)this.currentTime+e<this.duration?this.$store.dispatch("player/updateProgress",this.currentTime+e):this.next();else{var t=Math.max(this.currentTime+e,0);this.$store.dispatch("player/updateProgress",t)}},seekForward:function(){this.seek(5)},seekBackward:function(){this.seek(-5)},observeProgress:function(e){var t=this;e?(t.progressInterval&&clearInterval(t.progressInterval),t.progressInterval=setInterval((function(){t.updateProgress()}),1e3)):clearInterval(t.progressInterval)},setCurrentTime:function(e){e<0|e>this.duration||this.currentSound&&this.currentSound._sounds[0]&&e!==this.currentSound.seek()&&(0===e&&this.updateProgressThrottled.cancel(),this.currentSound.seek(e),this.$store.state.player.playing||this.updateProgress())},ended:function(){var e=1===this.$store.state.queue.tracks.length;1===this.looping||e&&2===this.looping?(this.currentSound.seek(0),this.$store.dispatch("player/updateProgress",0),this.soundId=this.currentSound.play(this.soundId)):this.$store.dispatch("player/trackEnded",this.currentTrack)},getSoundFromCache:function(e){return this.soundsCache.filter((function(t){return t.track.id===e.id}))[0]},addSoundToCache:function(e,t){var n={date:new Date,track:t,sound:e};this.soundsCache.push(n),this.checkCache()},checkCache:function(){var e=this,t=[];p["a"].reverse(this.soundsCache).forEach((function(n){t.length<e.maxPreloaded?t.push(n):n.sound.unload()})),this.soundsCache=p["a"].reverse(t)},removeFromCache:function(e){var t=[];this.soundsCache.forEach((function(n){n.sound===e?n.sound.unload():t.push(n)})),this.soundsCache=t},loadSound:function(e,t){var n=this;return Object(i["a"])(Object(o["a"])().mark((function r(){var a,i;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e,i=n.currentSound,i&&a!==t&&(i.stop(n.soundId),n.soundId=null),a){r.next=5;break}return r.abrupt("return");case 5:if(n.isShuffling||a===t){r.next=17;break}return r.next=8,n.getTrackData(a);case 8:a=r.sent,null==a&&n.handleError({}),n.currentSound=n.getSound(a),n.$store.commit("player/isLoadingAudio",!0),n.soundId=n.currentSound.play(),n.$store.commit("player/errored",!1),n.$store.commit("player/playing",!0),n.$store.dispatch("player/updateProgress",0),n.observeProgress(!0);case 17:case"end":return r.stop()}}),r)})))()},toggleMobilePlayer:function(){["queue","player"].indexOf(this.$store.state.ui.queueFocused)>-1?this.$store.commit("ui/queueFocused",null):this.$store.commit("ui/queueFocused","player")},switchTab:function(){"player"===this.$store.state.ui.queueFocused?this.$store.commit("ui/queueFocused","queue"):this.$store.commit("ui/queueFocused","player")},updateMetadata:function(){if(this.currentTrack&&"mediaSession"in navigator){var e={title:this.currentTrack.title,artist:this.currentTrack.artist.name};this.currentTrack.album&&this.currentTrack.album.cover&&(e.album=this.currentTrack.album.title,e.artwork=[{src:this.currentTrack.album.cover.urls.original,sizes:"96x96",type:"image/png"},{src:this.currentTrack.album.cover.urls.original,sizes:"128x128",type:"image/png"},{src:this.currentTrack.album.cover.urls.original,sizes:"192x192",type:"image/png"},{src:this.currentTrack.album.cover.urls.original,sizes:"256x256",type:"image/png"},{src:this.currentTrack.album.cover.urls.original,sizes:"384x384",type:"image/png"},{src:this.currentTrack.album.cover.urls.original,sizes:"512x512",type:"image/png"}]),navigator.mediaSession.metadata=new window.MediaMetadata(e)}}})},v=h,y=n("2877"),g=Object(y["a"])(v,r,a,!1,null,null,null);t["default"]=g.exports},"2c3e":function(e,t,n){var r=n("da84"),a=n("83ab"),o=n("9f7f").MISSED_STICKY,i=n("c6b6"),s=n("9bf2").f,u=n("69f3").get,l=RegExp.prototype,c=r.TypeError;a&&o&&s(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!u(this).sticky;throw c("Incompatible receiver, RegExp required")}}})},"43a5":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"circular control button",class:["component-volume-control",{expanded:e.expanded}],on:{click:function(e){e.preventDefault(),e.stopPropagation()},mouseover:e.handleOver,mouseleave:e.handleLeave}},[0===e.sliderVolume?n("span",{attrs:{role:"button",title:e.labels.unmute,"aria-label":e.labels.unmute},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.unmute.apply(null,arguments)}}},[n("i",{staticClass:"volume off icon"})]):e.sliderVolume<.5?n("span",{attrs:{role:"button",title:e.labels.mute,"aria-label":e.labels.mute},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.mute.apply(null,arguments)}}},[n("i",{staticClass:"volume down icon"})]):n("span",{attrs:{role:"button",title:e.labels.mute,"aria-label":e.labels.mute},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.mute.apply(null,arguments)}}},[n("i",{staticClass:"volume up icon"})]),n("div",{staticClass:"popup"},[n("label",{staticClass:"visually-hidden",attrs:{for:"volume-slider"}},[e._v(e._s(e.labels.slider))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sliderVolume,expression:"sliderVolume"}],attrs:{id:"volume-slider",type:"range",step:"any",min:"0",max:e.volumeSteps},domProps:{value:e.sliderVolume},on:{__r:function(t){e.sliderVolume=t.target.value}}})])])},a=[],o=n("5530"),i=n("2f62"),s={data:function(){return{expanded:!1,timeout:null,volumeSteps:100}},computed:{sliderVolume:{get:function(){return this.$store.state.player.volume*this.volumeSteps},set:function(e){this.$store.commit("player/volume",e/this.volumeSteps)}},labels:function(){return{unmute:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Unmute"),mute:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Mute"),slider:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Adjust volume")}}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])({mute:"player/mute",unmute:"player/unmute",toggleMute:"player/toggleMute"})),{},{handleOver:function(){this.timeout&&clearTimeout(this.timeout),this.expanded=!0},handleLeave:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.expanded=!1}),500)}})},u=s,l=n("2877"),c=Object(l["a"])(u,r,a,!1,null,null,null);t["default"]=c.exports},"4b90":function(e,t,n){"use strict";n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("c975"),n("466d"),n("5319");t["a"]={updateQueryString:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+a+t+"="+n}}},"4d63":function(e,t,n){var r=n("83ab"),a=n("da84"),o=n("e330"),i=n("94ca"),s=n("7156"),u=n("9112"),l=n("9bf2").f,c=n("241c").f,d=n("3a9b"),p=n("44e7"),f=n("577e"),_=n("ad6d"),m=n("9f7f"),h=n("6eeb"),v=n("d039"),y=n("1a2d"),g=n("69f3").enforce,b=n("2626"),k=n("b622"),T=n("fce3"),x=n("107c"),w=k("match"),A=a.RegExp,S=A.prototype,C=a.SyntaxError,P=o(_),I=o(S.exec),$=o("".charAt),O=o("".replace),q=o("".indexOf),F=o("".slice),E=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,L=/a/g,M=new A(D)!==D,H=m.MISSED_STICKY,K=m.UNSUPPORTED_Y,V=r&&(!M||H||T||x||v((function(){return L[w]=!1,A(D)!=D||A(L)==L||"/a/i"!=A(D,"i")}))),B=function(e){for(var t,n=e.length,r=0,a="",o=!1;r<=n;r++)t=$(e,r),"\\"!==t?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),a+=t):a+="[\\s\\S]":a+=t+$(e,++r);return a},j=function(e){for(var t,n=e.length,r=0,a="",o=[],i={},s=!1,u=!1,l=0,c="";r<=n;r++){if(t=$(e,r),"\\"===t)t+=$(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:I(E,F(e,r+1))&&(r+=2,u=!0),a+=t,l++;continue;case">"===t&&u:if(""===c||y(i,c))throw new C("Invalid capture group name");i[c]=!0,o[o.length]=[c,l],u=!1,c="";continue}u?c+=t:a+=t}return[a,o]};if(i("RegExp",V)){for(var R=function(e,t){var n,r,a,o,i,l,c=d(S,this),_=p(e),m=void 0===t,h=[],v=e;if(!c&&_&&m&&e.constructor===R)return e;if((_||d(S,e))&&(e=e.source,m&&(t="flags"in v?v.flags:P(v))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),v=e,T&&"dotAll"in D&&(r=!!t&&q(t,"s")>-1,r&&(t=O(t,/s/g,""))),n=t,H&&"sticky"in D&&(a=!!t&&q(t,"y")>-1,a&&K&&(t=O(t,/y/g,""))),x&&(o=j(e),e=o[0],h=o[1]),i=s(A(e,t),c?this:S,R),(r||a||h.length)&&(l=g(i),r&&(l.dotAll=!0,l.raw=R(B(e),n)),a&&(l.sticky=!0),h.length&&(l.groups=h)),e!==v)try{u(i,"source",""===v?"(?:)":v)}catch(y){}return i},N=function(e){e in R||l(R,e,{configurable:!0,get:function(){return A[e]},set:function(t){A[e]=t}})},G=c(A),Q=0;G.length>Q;)N(G[Q++]);S.constructor=R,R.prototype=S,h(a,"RegExp",R)}b("RegExp")},"53a8":function(e,t){e.exports=r;var n=Object.prototype.hasOwnProperty;function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var a in r)n.call(r,a)&&(e[a]=r[a])}return e}},"6b93":function(e,t,n){var r=n("23e7"),a=n("867a");r({target:"Math",stat:!0},{log10:a})},"6c92":function(e,t,n){var r,a=n("0580"),o=n("53a8"),i=function(){var e=[];return{activateTrap:function(t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var r=e.indexOf(t);-1===r||e.splice(r,1),e.push(t)},deactivateTrap:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}}}();function s(e,t){var n=document,s="string"===typeof e?n.querySelector(e):e,p=o({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),f={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},_={activate:m,deactivate:h,pause:v,unpause:y};return _;function m(e){if(!f.active){I(),f.active=!0,f.paused=!1,f.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:p.onActivate;return t&&t(),g(),_}}function h(e){if(f.active){clearTimeout(r),b(),f.active=!1,f.paused=!1,i.deactivateTrap(_);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:p.onDeactivate;t&&t();var n=e&&void 0!==e.returnFocus?e.returnFocus:p.returnFocusOnDeactivate;return n&&d((function(){$(x(f.nodeFocusedBeforeActivation))})),_}}function v(){!f.paused&&f.active&&(f.paused=!0,b())}function y(){f.paused&&f.active&&(f.paused=!1,I(),g())}function g(){if(f.active)return i.activateTrap(_),r=d((function(){$(T())})),n.addEventListener("focusin",A,!0),n.addEventListener("mousedown",w,{capture:!0,passive:!1}),n.addEventListener("touchstart",w,{capture:!0,passive:!1}),n.addEventListener("click",P,{capture:!0,passive:!1}),n.addEventListener("keydown",S,{capture:!0,passive:!1}),_}function b(){if(f.active)return n.removeEventListener("focusin",A,!0),n.removeEventListener("mousedown",w,!0),n.removeEventListener("touchstart",w,!0),n.removeEventListener("click",P,!0),n.removeEventListener("keydown",S,!0),_}function k(e){var t=p[e],r=t;if(!t)return null;if("string"===typeof t&&(r=n.querySelector(t),!r))throw new Error("`"+e+"` refers to no known node");if("function"===typeof t&&(r=t(),!r))throw new Error("`"+e+"` did not return a node");return r}function T(){var e;if(e=null!==k("initialFocus")?k("initialFocus"):s.contains(n.activeElement)?n.activeElement:f.firstTabbableNode||k("fallbackFocus"),!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e}function x(e){var t=k("setReturnFocus");return t||e}function w(e){s.contains(e.target)||(p.clickOutsideDeactivates?h({returnFocus:!a.isFocusable(e.target)}):p.allowOutsideClick&&p.allowOutsideClick(e)||e.preventDefault())}function A(e){s.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),$(f.mostRecentlyFocusedNode||T()))}function S(e){if(!1!==p.escapeDeactivates&&l(e))return e.preventDefault(),void h();c(e)&&C(e)}function C(e){return I(),e.shiftKey&&e.target===f.firstTabbableNode?(e.preventDefault(),void $(f.lastTabbableNode)):e.shiftKey||e.target!==f.lastTabbableNode?void 0:(e.preventDefault(),void $(f.firstTabbableNode))}function P(e){p.clickOutsideDeactivates||s.contains(e.target)||p.allowOutsideClick&&p.allowOutsideClick(e)||(e.preventDefault(),e.stopImmediatePropagation())}function I(){var e=a(s);f.firstTabbableNode=e[0]||T(),f.lastTabbableNode=e[e.length-1]||T()}function $(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),f.mostRecentlyFocusedNode=e,u(e)&&e.select()):$(T()))}}function u(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"===typeof e.select}function l(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}function c(e){return"Tab"===e.key||9===e.keyCode}function d(e){return setTimeout(e,0)}e.exports=s},"867a":function(e,t){var n=Math.log,r=Math.LOG10E;e.exports=Math.log10||function(e){return n(e)*r}},"8ced":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"main with-background component-queue",attrs:{"aria-label":e.labels.queue}},[r("div",{class:["ui vertical stripe queue segment",e.playerFocused?"player-focused":""]},[r("div",{staticClass:"ui fluid container"},[r("div",{staticClass:"ui stackable grid",attrs:{id:"queue-grid"}},[r("div",{staticClass:"ui six wide column current-track"},[r("div",{staticClass:"ui basic segment",attrs:{id:"player"}},[e.currentTrack?[e.currentTrack.cover&&e.currentTrack.cover.urls.large_square_crop?r("img",{ref:"cover",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](e.currentTrack.cover.urls.large_square_crop)}}):e.currentTrack.album&&e.currentTrack.album.cover&&e.currentTrack.album.cover.urls.large_square_crop?r("img",{ref:"cover",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](e.currentTrack.album.cover.urls.large_square_crop)}}):r("img",{staticClass:"ui image",attrs:{alt:"",src:n("271e")}}),r("h1",{staticClass:"ui header"},[r("div",{staticClass:"content ellipsis"},[r("router-link",{staticClass:"small header discrete link track",attrs:{to:{name:"library.tracks.detail",params:{id:e.currentTrack.id}}}},[e._v(" "+e._s(e.currentTrack.title)+" ")]),r("div",{staticClass:"sub header ellipsis"},[r("router-link",{staticClass:"discrete link artist",attrs:{to:{name:"library.artists.detail",params:{id:e.currentTrack.artist.id}}}},[e._v(" "+e._s(e.currentTrack.artist.name)+" ")]),e.currentTrack.album?[e._v(" / "),r("router-link",{staticClass:"discrete link album",attrs:{to:{name:"library.albums.detail",params:{id:e.currentTrack.album.id}}}},[e._v(" "+e._s(e.currentTrack.album.title)+" ")])]:e._e()],2)],1)]),e.currentTrack&&e.errored?r("div",{staticClass:"ui small warning message"},[r("h3",{staticClass:"header"},[r("translate",{attrs:{"translate-context":"Sidebar/Player/Error message.Title"}},[e._v(" The track cannot be loaded ")])],1),e.hasNext&&e.playing&&e.$store.state.player.errorCount<e.$store.state.player.maxConsecutiveErrors?r("p",[r("translate",{attrs:{"translate-context":"Sidebar/Player/Error message.Paragraph"}},[e._v(" The next track will play automatically in a few seconds… ")]),r("i",{staticClass:"loading spinner icon"})],1):e._e(),r("p",[r("translate",{attrs:{"translate-context":"Sidebar/Player/Error message.Paragraph"}},[e._v(" You may have a connectivity issue. ")])],1)]):e._e(),r("div",{staticClass:"additional-controls tablet-and-below"},[e.$store.state.auth.authenticated?r("track-favorite-icon",{attrs:{track:e.currentTrack}}):e._e(),e.$store.state.auth.authenticated?r("track-playlist-icon",{attrs:{track:e.currentTrack}}):e._e(),e.$store.state.auth.authenticated?r("button",{class:["ui","really","basic","circular","icon","button"],attrs:{"aria-label":e.labels.addArtistContentFilter,title:e.labels.addArtistContentFilter},on:{click:function(t){return e.$store.dispatch("moderation/hide",{type:"artist",target:e.currentTrack.artist})}}},[r("i",{class:["eye slash outline","basic","icon"]})]):e._e()],1),r("div",{staticClass:"progress-wrapper"},[e.currentTrack&&!e.errored?r("div",{staticClass:"progress-area"},[r("div",{ref:"progress",class:["ui","small","vibrant",{indicating:e.isLoadingAudio},"progress"],on:{click:e.touchProgress}},[r("div",{staticClass:"buffer bar",style:{width:e.bufferProgress+"%"},attrs:{"data-percent":e.bufferProgress}}),r("div",{staticClass:"position bar",style:{width:e.progress+"%"},attrs:{"data-percent":e.progress}})])]):r("div",{staticClass:"progress-area"},[r("div",{ref:"progress",class:["ui","small","vibrant","progress"]},[r("div",{staticClass:"buffer bar"}),r("div",{staticClass:"position bar"})])]),r("div",{staticClass:"progress"},[e.isLoadingAudio?[r("span",{staticClass:"left floated timer"},[e._v("00:00")]),r("span",{staticClass:"right floated timer"},[e._v("00:00")])]:[r("a",{staticClass:"left floated timer discrete start",attrs:{href:"","aria-label":e.labels.restart},on:{click:function(t){return t.preventDefault(),e.setCurrentTime(0)}}},[e._v(e._s(e.currentTimeFormatted))]),r("span",{staticClass:"right floated timer total"},[e._v(e._s(e.durationFormatted))])]],2)]),r("div",{staticClass:"player-controls tablet-and-below"},[r("span",{staticClass:"control",attrs:{role:"button",title:e.labels.previousTrack,"aria-label":e.labels.previousTrack,disabled:e.emptyQueue},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.dispatch("queue/previous")}}},[r("i",{class:["ui","backward step",{disabled:e.emptyQueue},"icon"]})]),e.playing?r("span",{staticClass:"control",attrs:{role:"button",title:e.labels.pause,"aria-label":e.labels.pause},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.pausePlayback.apply(null,arguments)}}},[r("i",{class:["ui","pause",{disabled:!e.currentTrack},"icon"]})]):r("span",{staticClass:"control",attrs:{role:"button",title:e.labels.play,"aria-label":e.labels.play},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.resumePlayback.apply(null,arguments)}}},[r("i",{class:["ui","play",{disabled:!e.currentTrack},"icon"]})]),r("span",{staticClass:"control",attrs:{role:"button",title:e.labels.next,"aria-label":e.labels.next,disabled:!e.hasNext},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$store.dispatch("queue/next")}}},[r("i",{class:["ui",{disabled:!e.hasNext},"forward step","icon"]})])])]:e._e()],2)]),r("div",{staticClass:"ui ten wide column queue-column"},[r("div",{staticClass:"ui basic clearing fixed-header segment"},[r("h2",{staticClass:"ui header"},[r("div",{staticClass:"content"},[r("button",{staticClass:"ui right floated basic button",on:{click:function(t){return e.$store.commit("ui/queueFocused",null)}}},[r("translate",{attrs:{"translate-context":"*/Queue/*/Verb"}},[e._v(" Close ")])],1),r("button",{staticClass:"ui right floated basic button danger",on:{click:function(t){return e.$store.dispatch("queue/clean")}}},[r("translate",{attrs:{"translate-context":"*/Queue/*/Verb"}},[e._v(" Clear ")])],1),e._v(" "+e._s(e.labels.queue)+" "),r("div",{staticClass:"sub header"},[r("div",[r("translate",{attrs:{"translate-context":"Sidebar/Queue/Text","translate-params":{index:e.queue.currentIndex+1,length:e.queue.tracks.length}}},[e._v(" Track %{ index } of %{ length } ")]),e.$store.state.radios.running?e._e():[e._v(" - "),r("span",{attrs:{title:e.labels.duration}},[e._v(" "+e._s(e.timeLeft)+" ")])]],2)])])])]),r("table",{staticClass:"ui compact very basic fixed single line selectable unstackable table"},[r("draggable",{attrs:{tag:"tbody",handle:".handle"},on:{update:e.reorder},model:{value:e.tracks,callback:function(t){e.tracks=t},expression:"tracks"}},e._l(e.tracks,(function(t,a){return r("tr",{key:a,class:["queue-item",{active:a===e.queue.currentIndex}]},[r("td",{staticClass:"handle"},[r("i",{staticClass:"grip lines icon"})]),r("td",{staticClass:"image-cell",on:{click:function(t){return e.$store.dispatch("queue/currentIndex",a)}}},[t.cover&&t.cover.urls.original?r("img",{staticClass:"ui mini image",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop)}}):t.album&&t.album.cover&&t.album.cover.urls.original?r("img",{staticClass:"ui mini image",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"](t.album.cover.urls.medium_square_crop)}}):r("img",{staticClass:"ui mini image",attrs:{alt:"",src:n("271e")}})]),r("td",{attrs:{colspan:"3"},on:{click:function(t){return e.$store.dispatch("queue/currentIndex",a)}}},[r("button",{staticClass:"title reset ellipsis",attrs:{title:t.title,"aria-label":e.labels.selectTrack}},[r("strong",[e._v(e._s(t.title))]),r("br"),r("span",[e._v(" "+e._s(t.artist.name)+" ")])])]),r("td",{staticClass:"duration-cell"},[t.uploads.length>0?[e._v(" "+e._s(e.time.durationFormatted(t.uploads[0].duration))+" ")]:e._e()],2),r("td",{staticClass:"controls"},[e.$store.getters["favorites/isFavorite"](t.id)?[r("i",{staticClass:"pink heart icon"})]:e._e(),r("button",{class:["ui","really","tiny","basic","circular","icon","button"],attrs:{"aria-label":e.labels.removeFromQueue,title:e.labels.removeFromQueue},on:{click:function(t){return t.stopPropagation(),e.cleanTrack(a)}}},[r("i",{staticClass:"x icon"})])],2)])})),0)],1),e.$store.state.radios.running?r("div",{staticClass:"ui info message"},[r("div",{staticClass:"content"},[r("h3",{staticClass:"header"},[r("i",{staticClass:"feed icon"}),e._v(" "),r("translate",{attrs:{"translate-context":"Sidebar/Player/Title"}},[e._v(" You have a radio playing ")])],1),r("p",[r("translate",{attrs:{"translate-context":"Sidebar/Player/Paragraph"}},[e._v(" New tracks will be appended here automatically. ")])],1),r("button",{staticClass:"ui basic primary button",on:{click:function(t){return e.$store.dispatch("radios/stop")}}},[r("translate",{attrs:{"translate-context":"*/Player/Button.Label/Short, Verb"}},[e._v(" Stop radio ")])],1)])]):e._e()])])])])])},a=[],o=n("5530"),i=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("fb6a"),n("7db0"),n("2f62")),s=n("1157"),u=n.n(s),l=n("c1df"),c=n.n(l),d=n("ceb5"),p=n("cadb"),f=n("6c92"),_=n.n(f),m={components:{TrackFavoriteIcon:function(){return Promise.all([n.e("auth-audio~auth-libraries"),n.e("auth-audio")]).then(n.bind(null,"4389"))},TrackPlaylistIcon:function(){return Promise.all([n.e("auth-audio~auth-libraries"),n.e("auth-audio")]).then(n.bind(null,"4c04"))},draggable:function(){return n.e("draggable").then(n.t.bind(null,"b76a",7))}},data:function(){return{showVolume:!1,isShuffling:!1,tracksChangeBuffer:null,focusTrap:null,time:p["a"]}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])({currentIndex:function(e){return e.queue.currentIndex},playing:function(e){return e.player.playing},isLoadingAudio:function(e){return e.player.isLoadingAudio},volume:function(e){return e.player.volume},looping:function(e){return e.player.looping},duration:function(e){return e.player.duration},bufferProgress:function(e){return e.player.bufferProgress},errored:function(e){return e.player.errored},currentTime:function(e){return e.player.currentTime},queue:function(e){return e.queue}})),Object(i["c"])({currentTrack:"queue/currentTrack",hasNext:"queue/hasNext",emptyQueue:"queue/isEmpty",durationFormatted:"player/durationFormatted",currentTimeFormatted:"player/currentTimeFormatted",progress:"player/progress"})),{},{tracks:{get:function(){return this.$store.state.queue.tracks},set:function(e){this.tracksChangeBuffer=e}},labels:function(){return{queue:this.$pgettext("*/*/*","Queue"),duration:this.$pgettext("*/*/*","Duration"),addArtistContentFilter:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Hide content from this artist…"),restart:this.$pgettext("*/*/*","Restart track")}},timeLeft:function(){var e=d["a"].sum(this.queue.tracks.slice(this.queue.currentIndex).map((function(e){return(e.uploads||[]).map((function(e){return e.duration||0}))[0]||0})));return c()(this.$store.state.ui.lastDate).add(e,"seconds").fromNow(!0)},sliderVolume:{get:function(){return this.volume},set:function(e){this.$store.commit("player/volume",e)}},playerFocused:function(){return"player"===this.$store.state.ui.queueFocused}}),watch:{"$store.state.ui.queueFocused":{handler:function(e){var t=this;"queue"===e&&this.$nextTick((function(){t.scrollToCurrent()}))},immediate:!0},"$store.state.queue.currentIndex":{handler:function(){var e=this;this.$nextTick((function(){e.scrollToCurrent()}))}},"$store.state.queue.tracks":{handler:function(e){e&&0!==e.length||this.$store.commit("ui/queueFocused",null)},immediate:!0},"$route.fullPath":function(){this.$store.commit("ui/queueFocused",null)}},mounted:function(){var e=this;this.focusTrap=_()(this.$el,{allowOutsideClick:function(){return!0}}),this.focusTrap.activate(),this.$nextTick((function(){setTimeout((function(){e.scrollToCurrent()}),400)}))},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])({cleanTrack:"queue/cleanTrack",mute:"player/mute",unmute:"player/unmute",clean:"queue/clean",toggleMute:"player/toggleMute",resumePlayback:"player/resumePlayback",pausePlayback:"player/pausePlayback"})),{},{reorder:function(e){this.$store.commit("queue/reorder",{tracks:this.tracksChangeBuffer,oldIndex:e.oldIndex,newIndex:e.newIndex})},scrollToCurrent:function(){var e=u()(this.$el).find(".queue-item.active")[0];if(e){var t=e.getBoundingClientRect(),n=t.top+window.pageYOffset,r=n-window.innerHeight/2;window.scrollTo({top:r,behaviour:"smooth"})}},touchProgress:function(e){var t=this.$refs.progress,n=e.layerX/t.offsetWidth*this.duration;this.$emit("touch-progress",n)},shuffle:function(){var e=0===this.queue.tracks.length;if(!this.isShuffling&&!e){var t=this,n=this.$pgettext("Content/Queue/Message","Queue shuffled!");this.isShuffling=!0,setTimeout((function(){t.$store.dispatch("queue/shuffle",(function(){t.isShuffling=!1,t.$store.commit("ui/addMessage",{content:n,date:new Date})}))}),100)}}})},h=m,v=n("2877"),y=Object(v["a"])(h,r,a,!1,null,null,null);t["default"]=y.exports},c607:function(e,t,n){var r=n("da84"),a=n("83ab"),o=n("fce3"),i=n("c6b6"),s=n("9bf2").f,u=n("69f3").get,l=RegExp.prototype,c=r.TypeError;a&&o&&s(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!u(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})},c91d:function(e,t,n){n("6b93");var r=40;function a(e){if(e<=0)return 0;var t=(e-1)*r;return Math.pow(10,t/20)}function o(e){if(e<=0)return 0;var t=20*Math.log10(e);return 1-t/-r}t.toLinearVolumeScale=a,t.toLogarithmicVolumeScale=o}}]);