(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["channels"],{"372f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("channel-entries",{attrs:{"default-cover":t.object.artist.cover,"is-podcast":"podcast"===t.object.artist.content_category,limit:25,filters:{channel:t.object.uuid,ordering:"creation_date"}}})],1)},n=[],i=a("1e6f"),r={components:{ChannelEntries:i["a"]},props:{object:{type:Object,required:!0}}},o=r,l=a("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},"6eaa":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.submit.apply(null,arguments)}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v(" Error while saving channel ")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e,s){return a("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)]):t._e(),t.metadataChoices?[t.creating&&1===t.step?a("fieldset",{staticClass:"ui grouped channel-type required field"},[a("legend",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" What will this channel be used for? ")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"field"},t._l(t.categoryChoices,(function(e,s){return a("div",{key:s,class:["ui","radio","checkbox",{selected:e.value==t.newValues.content_category}]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.content_category,expression:"newValues.content_category"}],attrs:{id:"category-"+e.value,type:"radio",name:"channel-category"},domProps:{value:e.value,checked:t._q(t.newValues.content_category,e.value)},on:{change:function(a){return t.$set(t.newValues,"content_category",e.value)}}}),a("label",{attrs:{for:"category-"+e.value}},[a("span",{class:["right floated","placeholder","image",{circular:"music"===e.value}]}),a("strong",[t._v(t._s(e.label))]),a("div",{staticClass:"ui small hidden divider"}),t._v(" "+t._s(e.helpText)+" ")])])})),0)]):t._e(),t.creating&&2!==t.step?t._e():[a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-name"}},[a("translate",{attrs:{"translate-context":"Content/Channel/*"}},[t._v("Name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.name,expression:"newValues.name"}],attrs:{type:"text",required:"",placeholder:t.labels.namePlaceholder},domProps:{value:t.newValues.name},on:{input:function(e){e.target.composing||t.$set(t.newValues,"name",e.target.value)}}})]),a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-username"}},[a("translate",{attrs:{"translate-context":"Content/Channel/*"}},[t._v("Fediverse handle")])],1),a("div",{staticClass:"ui left labeled input"},[a("div",{staticClass:"ui basic label"},[t._v(" @ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.username,expression:"newValues.username"}],attrs:{type:"text",required:t.creating,disabled:!t.creating,placeholder:t.labels.usernamePlaceholder},domProps:{value:t.newValues.username},on:{input:function(e){e.target.composing||t.$set(t.newValues,"username",e.target.value)}}})]),t.creating?[a("div",{staticClass:"ui small hidden divider"}),a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/Paragraph"}},[t._v(" Used in URLs and to follow this channel in the Fediverse. It cannot be changed later. ")])],1)]:t._e()],2),a("div",{staticClass:"six wide column"},[a("attachment-input",{attrs:{required:!1,"image-class":"podcast"===t.newValues.content_category?"":"circular"},on:{delete:function(e){t.newValues.cover=null}},model:{value:t.newValues.cover,callback:function(e){t.$set(t.newValues,"cover",e)},expression:"newValues.cover"}},[a("translate",{attrs:{slot:"label","translate-context":"Content/Channel/*"},slot:"label"},[t._v(" Channel Picture ")])],1)],1),a("div",{staticClass:"ui small hidden divider"}),a("div",{staticClass:"ui stackable grid row"},[a("div",{staticClass:"ten wide column"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-tags"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tags")])],1),a("tags-selector",{attrs:{id:"channel-tags",required:!1},model:{value:t.newValues.tags,callback:function(e){t.$set(t.newValues,"tags",e)},expression:"newValues.tags"}})],1)]),"podcast"===t.newValues.content_category?a("div",{staticClass:"six wide column"},[a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-language"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Language")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.language,expression:"newValues.metadata.language"}],staticClass:"ui search selection dropdown",attrs:{id:"channel-language",name:"channel-language",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newValues.metadata,"language",e.target.multiple?a:a[0])}}},t._l(t.metadataChoices.language,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0)])]):t._e()]),a("div",{staticClass:"ui small hidden divider"}),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-name"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Description")])],1),a("content-form",{model:{value:t.newValues.description,callback:function(e){t.$set(t.newValues,"description",e)},expression:"newValues.description"}})],1),"podcast"===t.newValues.content_category?a("div",{staticClass:"ui two fields"},[a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-itunes-category"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.itunes_category,expression:"newValues.metadata.itunes_category"}],staticClass:"ui dropdown",attrs:{id:"itunes-category",name:"itunes-category",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newValues.metadata,"itunes_category",e.target.multiple?a:a[0])}}},t._l(t.metadataChoices.itunes_category,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0)]),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-itunes-category"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Subcategory")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.itunes_subcategory,expression:"newValues.metadata.itunes_subcategory"}],staticClass:"ui dropdown",attrs:{id:"itunes-category",name:"itunes-category",disabled:!t.newValues.metadata.itunes_category},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newValues.metadata,"itunes_subcategory",e.target.multiple?a:a[0])}}},t._l(t.itunesSubcategories,(function(e,s){return a("option",{key:s,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)])]):t._e(),"podcast"===t.newValues.content_category?a("div",{staticClass:"ui two fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-itunes-email"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Owner e-mail address")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.owner_email,expression:"newValues.metadata.owner_email"}],attrs:{id:"channel-itunes-email",name:"channel-itunes-email",type:"email"},domProps:{value:t.newValues.metadata.owner_email},on:{input:function(e){e.target.composing||t.$set(t.newValues.metadata,"owner_email",e.target.value)}}})]),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-itunes-name"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Owner name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.owner_name,expression:"newValues.metadata.owner_name"}],attrs:{id:"channel-itunes-name",name:"channel-itunes-name",maxlength:"255"},domProps:{value:t.newValues.metadata.owner_name},on:{input:function(e){e.target.composing||t.$set(t.newValues.metadata,"owner_name",e.target.value)}}})])]):t._e(),a("p",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" Used for the itunes:email and itunes:name field required by certain platforms such as Spotify or iTunes. ")])],1)]]:a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui text loader"},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v(" Loading ")])],1)])],2)},n=[],i=a("5530"),r=(a("ac1f"),a("5319"),a("d401"),a("d3b7"),a("25f0"),a("a9e3"),a("a4d3"),a("e01a"),a("bc3a")),o=a.n(r),l=a("c3b4"),c=a("8352");function u(t){return t.toString().toLowerCase().replace(/\s+/g,"").replace(/[^\w]+/g,"")}var d={components:{AttachmentInput:l["a"],TagsSelector:c["a"]},props:{object:{type:Object,required:!1,default:null},step:{type:Number,required:!1,default:1}},data:function(){var t={};return this.object&&(t.metadata=Object(i["a"])({},this.object.metadata||{}),t.name=this.object.artist.name,t.description=this.object.artist.description,t.cover=this.object.artist.cover,t.tags=this.object.artist.tags,t.content_category=this.object.artist.content_category,t.username=this.object.actor.preferred_username),{isLoading:!1,errors:[],metadataChoices:null,newValues:{name:t.name||"",username:t.username||"",tags:t.tags||[],description:(t.description||{}).text||"",cover:(t.cover||{}).uuid||null,content_category:t.content_category||"podcast",metadata:t.metadata||{}}}},computed:{creating:function(){return null===this.object},categoryChoices:function(){return[{value:"podcast",label:this.$pgettext("*/*/*","Podcasts"),helpText:this.$pgettext("Content/Channels/Help","Host your episodes and keep your community updated.")},{value:"music",label:this.$pgettext("*/*/*","Artist discography"),helpText:this.$pgettext("Content/Channels/Help","Publish music you make as a nice discography of albums and singles.")}]},itunesSubcategories:function(){for(var t=0;t<this.metadataChoices.itunes_category.length;t++){var e=this.metadataChoices.itunes_category[t];if(e.value===this.newValues.metadata.itunes_category)return e.children||[]}return[]},labels:function(){return{namePlaceholder:this.$pgettext("Content/Channel/Form.Field.Placeholder","Awesome channel name"),usernamePlaceholder:this.$pgettext("Content/Channel/Form.Field.Placeholder","awesomechannelname")}},submittable:function(){var t=this.newValues.name&&this.newValues.username;return"podcast"===this.newValues.content_category&&(t=t&&this.newValues.metadata.itunes_category&&this.newValues.metadata.language),!!t}},watch:{"newValues.name":function(t){this.creating&&(this.newValues.username=u(t))},"newValues.metadata.itunes_category":function(t){this.newValues.metadata.itunes_subcategory=null},"newValues.content_category":{handler:function(t){this.$emit("category",t)},immediate:!0},isLoading:{handler:function(t){this.$emit("loading",t)},immediate:!0},submittable:{handler:function(t){this.$emit("submittable",t)},immediate:!0}},created:function(){this.fetchMetadataChoices()},methods:{fetchMetadataChoices:function(){var t=this;o.a.get("channels/metadata-choices").then((function(e){t.metadataChoices=e.data}),(function(e){t.errors=e.backendErrors}))},submit:function(){this.isLoading=!0;var t=this,e=this.creating?o.a.post:o.a.patch,a=this.creating?"channels/":"channels/".concat(this.object.uuid),s={name:this.newValues.name,username:this.newValues.username,tags:this.newValues.tags,content_category:this.newValues.content_category,cover:this.newValues.cover,metadata:this.newValues.metadata};this.newValues.description?s.description={content_type:"text/markdown",text:this.newValues.description}:s.description=null,e(a,s).then((function(e){t.isLoading=!1,t.creating?t.$emit("created",e.data):t.$emit("updated",e.data)}),(function(e){t.isLoading=!1,t.errors=e.backendErrors,t.$emit("errored",t.errors)}))}}},h=d,p=a("2877"),m=Object(p["a"])(h,s,n,!1,null,null,null);e["a"]=m.exports},"83a3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object&&!t.isLoading?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.object.artist.name,expression:"object.artist.name"}],staticClass:"ui head vertical stripe segment container"},[a("div",{staticClass:"ui stackable grid"},[a("div",{staticClass:"seven wide column"},[a("div",{staticClass:"ui two column grid"},[a("div",{staticClass:"column"},[t.object.artist.cover?a("img",{staticClass:"huge channel-image",attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"](t.object.artist.cover.urls.medium_square_crop)}}):a("i",{staticClass:"huge circular inverted users violet icon"})]),a("div",{staticClass:"ui column right aligned"},[t.object.artist.tags&&t.object.artist.tags.length>0?a("tags-list",{attrs:{tags:t.object.artist.tags}}):t._e(),t.object.actor?a("actor-link",{attrs:{avatar:!1,actor:t.object.attributed_to,"display-name":!0}}):t._e(),t.totalTracks>0?[a("div",{staticClass:"ui hidden very small divider"}),"podcast"===t.object.artist.content_category?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } episodes","translate-n":t.totalTracks,"translate-params":{count:t.totalTracks}}},[t._v(" %{ count } episode ")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*","translate-params":{count:t.totalTracks},"translate-n":t.totalTracks,"translate-plural":"%{ count } tracks"}},[t._v(" %{ count } track ")])]:t._e(),t.object.attributed_to.full_username===t.$store.state.auth.fullUsername||t.$store.getters["channels/isSubscribed"](t.object.uuid)?[a("br"),a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } subscribers","translate-n":t.object.subscriptions_count,"translate-params":{count:t.object.subscriptions_count}}},[t._v(" %{ count } subscriber ")]),a("br"),a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } listenings","translate-n":t.object.downloads_count,"translate-params":{count:t.object.downloads_count}}},[t._v(" %{ count } listening ")])]:t._e(),a("div",{staticClass:"ui hidden small divider"}),a("a",{staticClass:"ui icon small basic button",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showSubscribeModal=!0}}},[a("i",{staticClass:"feed icon"})]),a("modal",{staticClass:"tiny",attrs:{show:t.showSubscribeModal},on:{"update:show":function(e){t.showSubscribeModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title/Verb"}},[t._v(" Subscribe to this channel ")])],1),a("div",{staticClass:"scrollable content"},[a("div",{staticClass:"description"},[t.$store.state.auth.authenticated?[a("h3",[a("i",{staticClass:"user icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Header"}},[t._v(" Subscribe on Funkwhale ")])],1),a("subscribe-button",{attrs:{channel:t.object},on:{subscribed:function(e){t.object.subscriptions_count+=1},unsubscribed:function(e){t.object.subscriptions_count-=1}}})]:t._e(),t.object.rss_url?[a("h3",[a("i",{staticClass:"feed icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Header"}},[t._v(" Subscribe via RSS ")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/Label"}},[t._v(" Copy-paste the following URL in your favorite podcatcher: ")])],1),a("copy-input",{attrs:{value:t.object.rss_url}})]:t._e(),t.object.actor?[a("h3",[a("i",{staticClass:"bell icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Header"}},[t._v(" Subscribe on the Fediverse ")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/Label"}},[t._v(" If you're using Mastodon or other fediverse applications, you can subscribe to this account: ")])],1),a("copy-input",{attrs:{value:"@"+t.object.actor.full_username}})]:t._e()],2)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v(" Cancel ")])],1)])]),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown",value:{direction:"downward"},expression:"{direction: 'downward'}"}],ref:"dropdown",staticClass:"ui right floated pointing dropdown icon small basic button"},[a("i",{staticClass:"ellipsis vertical icon"}),a("div",{staticClass:"menu"},[t.totalTracks>0?a("a",{staticClass:"basic item",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.showEmbedModal=!t.showEmbedModal}}},[a("i",{staticClass:"code icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Embed")])],1):t._e(),t.object.actor&&t.object.actor.domain!=t.$store.getters["instance/domain"]?a("a",{staticClass:"basic item",attrs:{href:t.object.url,target:"_blank"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-params":{domain:t.object.actor.domain},"translate-context":"Content/*/Button.Label/Verb"}},[t._v("View on %{ domain }")])],1):t._e(),a("div",{staticClass:"divider"}),t._l(t.getReportableObjs({account:t.object.attributed_to,channel:t.object}),(function(e){return a("a",{key:e.target.type+e.target.id,staticClass:"basic item",attrs:{href:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),t.isOwner?[a("div",{staticClass:"divider"}),a("a",{staticClass:"item",attrs:{href:""},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showEditModal=!0}}},[a("i",{staticClass:"edit icon"}),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Edit…")])],1),t.object?a("dangerous-button",{class:["ui",{loading:t.isLoading},"item"],on:{confirm:function(e){return t.remove()}}},[a("i",{staticClass:"ui trash icon"}),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v(" Delete… ")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title"}},[t._v(" Delete this Channel? ")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v(" The channel will be deleted, as well as any related files and data. This action is irreversible. ")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v(" Delete ")])],1)],1):t._e()]:t._e(),t.$store.state.auth.availablePermissions["library"]?[a("div",{staticClass:"divider"}),a("router-link",{staticClass:"basic item",attrs:{to:{name:"manage.channels.detail",params:{id:t.object.uuid}}}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v(" Open in moderation interface ")])],1)]:t._e()],2)])],2)]),a("h1",{staticClass:"ui header"},[a("div",{staticClass:"left aligned",attrs:{title:t.object.artist.name}},[t._v(" "+t._s(t.object.artist.name)+" "),a("div",{staticClass:"ui hidden very small divider"}),t.object.actor?a("div",{staticClass:"sub header ellipsis",attrs:{title:t.object.actor.full_username}},[t._v(" "+t._s(t.object.actor.full_username)+" ")]):a("div",{staticClass:"sub header ellipsis"},[a("a",{attrs:{href:t.object.url||t.object.rss_url,rel:"noopener noreferrer",target:"_blank"}},[a("i",{staticClass:"external link icon"}),a("translate",{attrs:{"translate-params":{domain:t.externalDomain},"translate-context":"Content/Channel/Paragraph"}},[t._v("Mirrored from %{ domain }")])],1)])])]),a("div",{staticClass:"header-buttons"},[t.isOwner?a("div",{staticClass:"ui buttons"},[a("button",{staticClass:"ui basic labeled icon button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$store.commit("channels/showUploadModal",{show:!0,config:{channel:t.object}})}}},[a("i",{staticClass:"upload icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Button.Label/Verb"}},[t._v(" Upload ")])],1)]):t._e(),a("div",{staticClass:"ui buttons"},[a("play-button",{staticClass:"vibrant",attrs:{"is-playable":t.isPlayable,artist:t.object.artist}},[a("translate",{attrs:{"translate-context":"Content/Channels/Button.Label/Verb"}},[t._v(" Play ")])],1)],1),a("div",{staticClass:"ui buttons"},[a("subscribe-button",{attrs:{channel:t.object},on:{subscribed:function(e){t.object.subscriptions_count+=1},unsubscribed:function(e){t.object.subscriptions_count-=1}}})],1),t.totalTracks>0?a("modal",{attrs:{show:t.showEmbedModal},on:{"update:show":function(e){t.showEmbedModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Artist/Title/Verb"}},[t._v(" Embed this artist work on your website ")])],1),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[a("embed-wizard",{attrs:{id:t.object.artist.id,type:"artist"}})],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v(" Cancel ")])],1)])]):t._e(),t.isOwner?a("modal",{attrs:{show:t.showEditModal},on:{"update:show":function(e){t.showEditModal=e}}},[a("h4",{staticClass:"header"},["podcast"===t.object.artist.content_category?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/*"}},[t._v(" Podcast channel ")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Channel/*"}},[t._v(" Artist channel ")])],1),a("div",{staticClass:"scrolling content"},[a("channel-form",{ref:"editForm",attrs:{object:t.object},on:{loading:function(e){t.edit.isLoading=e},submittable:function(e){t.edit.submittable=e},updated:t.fetchData}}),a("div",{staticClass:"ui hidden divider"})],1),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui left floated basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v(" Cancel ")])],1),a("button",{class:["ui","primary","confirm",{loading:t.edit.isLoading},"button"],attrs:{disabled:!t.edit.submittable},on:{click:function(e){return e.stopPropagation(),t.$refs.editForm.submit.apply(null,arguments)}}},[a("translate",{attrs:{"translate-context":"*/Channels/Button.Label"}},[t._v(" Update channel ")])],1)])]):t._e()],1),"large"===t.$store.getters["ui/layoutVersion"]?a("div",[a("rendered-description",{attrs:{content:t.object.artist.description,"update-url":"channels/"+t.object.uuid+"/","can-update":!1},on:{updated:function(e){t.object=e}}})],1):t._e()]),a("div",{staticClass:"nine wide column"},[a("div",{staticClass:"ui secondary pointing center aligned menu"},[a("router-link",{staticClass:"item",attrs:{exact:!0,to:{name:"channels.detail",params:{id:t.id}}}},[a("translate",{attrs:{"translate-context":"Content/Channels/Link"}},[t._v(" Overview ")])],1),a("router-link",{staticClass:"item",attrs:{exact:!0,to:{name:"channels.detail.episodes",params:{id:t.id}}}},[t.isPodcast?a("translate",{key:"1",attrs:{"translate-context":"Content/Channels/*"}},[t._v(" All Episodes ")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v(" Tracks ")])],1)],1),a("div",{staticClass:"ui hidden divider"}),t.object?a("router-view",{attrs:{object:t.object},on:{"tracks-loaded":function(e){t.totalTracks=e}}}):t._e()],1)])])]:t._e()],2)},n=[],i=a("c7eb"),r=a("1da1"),o=(a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("bc3a")),l=a.n(o),c=a("a3e6"),u=a("21a2"),d=a("404d"),h=a("6b08"),p=a("add5"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$store.state.auth.authenticated?a("button",{class:["ui","pink",{inverted:t.isSubscribed},{favorited:t.isSubscribed},"icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.toggle.apply(null,arguments)}}},[a("i",{staticClass:"heart icon"}),t.isSubscribed?a("translate",{attrs:{"translate-context":"Content/Track/Button.Message"}},[t._v(" Unsubscribe ")]):a("translate",{attrs:{"translate-context":"Content/Track/*/Verb"}},[t._v(" Subscribe ")])],1):a("button",{class:["ui","pink","icon","labeled","button"],on:{click:function(e){t.$refs.loginModal.show=!0}}},[a("i",{staticClass:"heart icon"}),a("translate",{attrs:{"translate-context":"Content/Track/*/Verb"}},[t._v(" Subscribe ")]),a("login-modal",{ref:"loginModal",staticClass:"small",attrs:{"next-route":t.$route.fullPath,message:t.message.authMessage,cover:t.channel.artist.cover},on:{created:function(e){t.$refs.loginModal.show=!1}}})],1)},b=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{show:t.show},on:{"update:show":function(e){t.show=e}}},[a("h4",{staticClass:"header"},[t._v(" "+t._s(t.labels.header)+" ")]),t.cover?a("div",{staticClass:"image content"},[a("div",{staticClass:"ui medium image"},[a("img",{attrs:{src:t.cover.urls.medium_square_crop}})]),a("div",{staticClass:"description"},[a("div",{staticClass:"ui header"},[t._v(" "+t._s(t.labels.description)+" ")]),a("p",[t._v(" "+t._s(t.message)+" ")])])]):a("div",{staticClass:"content"},[a("div",{staticClass:"ui centered header"},[t._v(" "+t._s(t.labels.description)+" ")]),a("p",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.message)+" ")])]),a("div",{staticClass:"actions"},[a("router-link",{staticClass:"ui labeled icon button",attrs:{to:{path:"/login",query:{next:t.nextRoute}}}},[a("i",{staticClass:"key icon"}),t._v(" "+t._s(t.labels.login)+" ")]),t.$store.state.instance.settings.users.registration_enabled.value?a("router-link",{staticClass:"ui labeled icon button",attrs:{to:{path:"/signup"}}},[a("i",{staticClass:"user icon"}),t._v(" "+t._s(t.labels.signup)+" ")]):t._e()],1)])},g=[],f={components:{Modal:d["default"]},props:{nextRoute:{type:String,required:!0},message:{type:String,required:!0},cover:{type:Object,required:!0}},data:function(){return{show:!1}},computed:{labels:function(){return{header:this.$pgettext("Popup/Title/Noun","Unauthenticated"),login:this.$pgettext("*/*/Button.Label/Verb","Log in"),signup:this.$pgettext("*/*/Button.Label/Verb","Sign up"),description:this.$pgettext("Popup/*/Paragraph","You don't have access!")}}}},_=f,C=a("2877"),w=Object(C["a"])(_,v,g,!1,null,null,null),y=w.exports,x={components:{LoginModal:y},props:{channel:{type:Object,required:!0}},computed:{title:function(){return this.isSubscribed?this.$pgettext("Content/Channel/Button/Verb","Subscribe"):this.$pgettext("Content/Channel/Button/Verb","Unsubscribe")},isSubscribed:function(){return this.$store.getters["channels/isSubscribed"](this.channel.uuid)},message:function(){return{authMessage:this.$pgettext("Popup/Message/Paragraph","You need to be logged in to subscribe to this channel")}}},methods:{toggle:function(){this.isSubscribed?this.$emit("unsubscribed"):this.$emit("subscribed"),this.$store.dispatch("channels/toggle",this.channel.uuid)}}},j=x,k=Object(C["a"])(j,m,b,!1,null,null,null),$=k.exports,V=a("6eaa"),P={components:{PlayButton:c["a"],EmbedWizard:u["a"],Modal:d["default"],TagsList:h["a"],SubscribeButton:$,ChannelForm:V["a"]},mixins:[p["a"]],beforeRouteUpdate:function(t,e,a){t.meta.preserveScrollPosition=!0,a()},props:{id:{type:String,required:!0}},data:function(){return{isLoading:!0,object:null,totalTracks:0,latestTracks:null,showEmbedModal:!1,showEditModal:!1,showSubscribeModal:!1,edit:{submittable:!1,loading:!1}}},computed:{externalDomain:function(){var t=document.createElement("a");return t.href=this.object.url||this.object.rss_url,t.hostname},isOwner:function(){return this.$store.state.auth.authenticated&&this.object.attributed_to.full_username===this.$store.state.auth.fullUsername},isPodcast:function(){return"podcast"===this.object.artist.content_category},labels:function(){return{title:this.$pgettext("*/*/*","Channel")}},contentFilter:function(){var t=this;return this.$store.getters["moderation/artistFilters"]().filter((function(e){return e.target.id===t.object.artist.id}))[0]},isPlayable:function(){return this.totalTracks>0}},watch:{id:function(){this.fetchData()},"$store.state.channels.latestPublication":function(t){t&&t.uploads&&t.channel.uuid===this.object.uuid&&this.fetchData()}},created:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:a=t.$store.state.auth.authenticated,a||t.$store.getters["instance/domain"]===t.object.actor.domain||t.$router.push({name:"login",query:{next:t.$route.fullPath}});case 4:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,t.showEditModal=!1,t.edit.isLoading=!1,t.isLoading=!0,s=l.a.get("channels/".concat(t.id),{params:{refresh:"true"}}).then((function(t){if(a.object=t.data,a.id===t.data.uuid&&t.data.actor){var e=t.data.actor;e.is_local?a.$router.replace({name:"channels.detail",params:{id:e.preferred_username}}):a.$router.replace({name:"channels.detail",params:{id:e.full_username}})}a.totalTracks=t.data.artist.tracks_count,a.isLoading=!1})),e.next=7,s;case 7:case"end":return e.stop()}}),e)})))()},remove:function(){var t=this;t.isLoading=!0,l.a.delete("channels/".concat(this.object.uuid)).then((function(e){t.isLoading=!1,t.$emit("deleted"),t.$router.push({name:"profile.overview",params:{username:t.$store.state.auth.username}})}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))}}},L=P,U=Object(C["a"])(L,s,n,!1,null,null,null);e["default"]=U.exports},c31a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.pendingUploads.length>0?a("div",{staticClass:"ui info message"},[t.isSuccessfull?[a("i",{staticClass:"close icon",attrs:{role:"button"},on:{click:function(e){t.pendingUploads=[]}}}),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Channel/Header"}},[t._v(" Uploads published successfully ")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" Processed uploads: ")]),t._v(" "+t._s(t.processedUploads.length)+"/"+t._s(t.pendingUploads.length)+" ")],1)]:t.isOver?[a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Channel/Header"}},[t._v(" Some uploads couldn't be published ")])],1),a("div",{staticClass:"ui hidden divider"}),t.skippedUploads.length>0?a("router-link",{staticClass:"ui basic button",attrs:{to:{name:"content.libraries.files",query:{q:"status:skipped"}}}},[a("translate",{attrs:{"translate-context":"Content/Channel/Button"}},[t._v(" View skipped uploads ")])],1):t._e(),t.erroredUploads.length>0?a("router-link",{staticClass:"ui basic button",attrs:{to:{name:"content.libraries.files",query:{q:"status:errored"}}}},[a("translate",{attrs:{"translate-context":"Content/Channel/Button"}},[t._v(" View errored uploads ")])],1):t._e()]:[a("div",{staticClass:"ui inline right floated active loader"}),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Channel/Header"}},[t._v(" Uploads are being processed ")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" Your uploads are being processed by Funkwhale and will be live very soon. ")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" Processed uploads: ")]),t._v(" "+t._s(t.processedUploads.length)+"/"+t._s(t.pendingUploads.length)+" ")],1)]],2):t._e(),"small"===t.$store.getters["ui/layoutVersion"]?a("div",[a("rendered-description",{attrs:{content:t.object.artist.description,"update-url":"channels/"+t.object.uuid+"/","can-update":!1}}),a("div",{staticClass:"ui hidden divider"})],1):t._e(),a("channel-entries",{key:String(t.episodesKey)+"entries",attrs:{"is-podcast":t.isPodcast,"default-cover":t.object.artist.cover,limit:25,filters:{channel:t.object.uuid,ordering:"-creation_date",page_size:"25"}}},[a("h2",{staticClass:"ui header"},[t.isPodcast?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" Latest episodes ")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" Latest tracks ")])],1)]),a("div",{staticClass:"ui hidden divider"}),a("channel-series",{key:String(t.seriesKey)+"series",attrs:{filters:t.seriesFilters,"is-podcast":t.isPodcast}},[a("h2",{staticClass:"ui with-actions header"},[t.isPodcast?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v(" Series ")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v(" Albums ")]),t.isOwner?a("div",{staticClass:"actions"},[a("a",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.$refs.albumModal.show=!0}}},[a("i",{staticClass:"plus icon"}),a("translate",{attrs:{"translate-context":"Content/Profile/Button"}},[t._v("Add new")])],1)]):t._e()],1)]),t.isOwner?a("album-modal",{ref:"albumModal",attrs:{channel:t.object},on:{created:function(e){t.$refs.albumModal.show=!1,t.seriesKey=new Date}}}):t._e()],1)},n=[],i=a("c7eb"),r=a("1da1"),o=a("2909"),l=(a("4de4"),a("d3b7"),a("4160"),a("159b"),a("99af"),a("bc3a")),c=a.n(l),u=a("4328"),d=a.n(u),h=a("1e6f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),a("div",{staticClass:"ui hidden divider"}),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.isPodcast?t._l(t.objects,(function(t){return a("channel-serie-card",{key:t.id,attrs:{serie:t}})})):a("div",{staticClass:"ui app-cards cards"},t._l(t.objects,(function(t){return a("album-card",{key:t.id,attrs:{album:t}})})),1),t.nextPage?[a("div",{staticClass:"ui hidden divider"}),t.nextPage?a("button",{class:["ui","basic","button"],on:{click:function(e){return t.fetchData(t.nextPage)}}},[a("translate",{attrs:{"translate-context":"*/*/Button,Label"}},[t._v(" Show more ")])],1):t._e()]:t._e(),t.isLoading||0!==t.objects.length?t._e():[a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData("albums/")}}},[a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/*"}},[t._v(" You may need to subscribe to this channel to see its contents. ")])],1)])]],2)},m=[],b=(a("a9e3"),a("ceb5")),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"channel-serie-card"},[s("div",{staticClass:"two-images"},[t.cover&&t.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}}):s("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}}),t.cover&&t.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}}):s("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}})]),s("div",{staticClass:"content ellipsis"},[s("strong",[s("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.albums.detail",params:{id:t.serie.id}}}},[t._v(" "+t._s(t.serie.title)+" ")])],1),s("div",{staticClass:"description"},[s("translate",{attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } episodes","translate-n":t.serie.tracks_count,"translate-params":{count:t.serie.tracks_count}}},[t._v(" %{ count } episode ")])],1)]),s("div",{staticClass:"controls"},[s("play-button",{attrs:{"icon-only":!0,"is-playable":!0,"button-classes":["ui","circular","vibrant","icon","button"],album:t.serie}})],1)])},g=[],f=a("a3e6"),_={components:{PlayButton:f["a"]},props:{serie:{type:Object,required:!0}},computed:{cover:function(){return this.serie.cover?this.serie.cover:null},duration:function(){var t=this.serie.uploads.filter((function(t){return t.duration}));return t[0].duration}}},C=_,w=a("2877"),y=Object(w["a"])(C,v,g,!1,null,null,null),x=y.exports,j=a("af03"),k={components:{ChannelSerieCard:x,AlbumCard:j["a"]},props:{filters:{type:Object,required:!0},isPodcast:{type:Boolean,default:!0},limit:{type:Number,default:5}},data:function(){return{objects:[],count:0,isLoading:!1,errors:null,nextPage:null}},created:function(){this.fetchData("albums/")},methods:{fetchData:function(t){if(t){this.isLoading=!0;var e=this,a=b["a"].clone(this.filters);a.page_size=this.limit,a.include_channels=!0,c.a.get(t,{params:a}).then((function(t){e.nextPage=t.data.next,e.isLoading=!1,e.objects=e.objects.concat(t.data.results),e.count=t.data.count}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}}}},$=k,V=Object(w["a"])($,p,m,!1,null,null,null),P=V.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"small",attrs:{show:t.show},on:{"update:show":function(e){t.show=e}}},[a("h4",{staticClass:"header"},["podcasts"===t.channel.content_category?a("translate",{key:"1",attrs:{"translate-context":"Popup/Channels/Title/Verb"}},[t._v(" New series ")]):a("translate",{key:"2",attrs:{"translate-context":"Popup/Channels/Title"}},[t._v(" New album ")])],1),a("div",{staticClass:"scrolling content"},[a("channel-album-form",{ref:"albumForm",attrs:{channel:t.channel},on:{loading:function(e){t.isLoading=e},submittable:function(e){t.submittable=e},created:function(e){return t.$emit("created",e)}}})],1),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic cancel button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v(" Cancel ")])],1),a("button",{class:["ui","primary",{loading:t.isLoading},"button"],attrs:{disabled:!t.submittable},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$refs.albumForm.submit()}}},[a("translate",{attrs:{"translate-context":"*/*/Button.Label"}},[t._v(" Create ")])],1)])])},U=[],O=a("404d"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{class:["ui",{loading:t.isLoading},"form"],on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v(" Error while creating ")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e,s){return a("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)]):t._e(),a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"album-title"}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Title")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.values.title,expression:"values.title"}],attrs:{type:"text"},domProps:{value:t.values.title},on:{input:function(e){e.target.composing||t.$set(t.values,"title",e.target.value)}}})])])},E=[],q=a("5530"),M=(a("ddb0"),{components:{},props:{channel:{type:Object,required:!0}},data:function(){return{errors:[],isLoading:!1,values:{title:""}}},computed:{submittable:function(){return this.values.title.length>0}},watch:{submittable:function(t){this.$emit("submittable",t)},isLoading:function(t){this.$emit("loading",t)}},methods:{submit:function(){var t=this;t.isLoading=!0,t.errors=[];var e=Object(q["a"])(Object(q["a"])({},this.values),{},{artist:this.channel.artist.id});return c.a.post("albums/",e).then((function(e){t.isLoading=!1,t.$emit("created")}),(function(e){t.errors=e.backendErrors,t.isLoading=!1}))}}}),T=M,D=Object(w["a"])(T,S,E,!1,null,null,null),B=D.exports,N={components:{Modal:O["default"],ChannelAlbumForm:B},props:{channel:{type:Object,required:!0}},data:function(){return{isLoading:!1,submittable:!1,show:!1}},watch:{show:function(){this.isLoading=!1,this.submittable=!1}}},F=N,A=Object(w["a"])(F,L,U,!1,null,null,null),H=A.exports,I={components:{ChannelEntries:h["a"],ChannelSeries:P,AlbumModal:H},props:{object:{type:Object,required:!0}},data:function(){return{seriesKey:new Date,episodesKey:new Date,pendingUploads:[]}},computed:{isPodcast:function(){return"podcast"===this.object.artist.content_category},isOwner:function(){return this.$store.state.auth.authenticated&&this.object.attributed_to.full_username===this.$store.state.auth.fullUsername},seriesFilters:function(){var t={artist:this.object.artist.id,ordering:"-creation_date"};return this.isOwner||(t.playable="true"),t},processedUploads:function(){return this.pendingUploads.filter((function(t){return"pending"!==t.import_status}))},erroredUploads:function(){return this.pendingUploads.filter((function(t){return"errored"===t.import_status}))},skippedUploads:function(){return this.pendingUploads.filter((function(t){return"skipped"===t.import_status}))},finishedUploads:function(){return this.pendingUploads.filter((function(t){return"finished"===t.import_status}))},pendingUploadsById:function(){var t={};return this.pendingUploads.forEach((function(e){t[e.uuid]=e})),t},isOver:function(){return this.pendingUploads&&this.processedUploads.length===this.pendingUploads.length},isSuccessfull:function(){return this.pendingUploads&&this.finishedUploads.length===this.pendingUploads.length}},watch:{"$store.state.channels.latestPublication":function(t){t&&t.uploads&&t.channel.uuid===this.object.uuid&&(this.pendingUploads=[].concat(Object(o["a"])(this.pendingUploads),Object(o["a"])(t.uploads)))},isOver:function(t){t&&(this.seriesKey=new Date,this.episodesKey=new Date)}},created:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isOwner){e.next=4;break}return e.next=3,t.fetchPendingUploads();case 3:t.$store.commit("ui/addWebsocketEventHandler",{eventName:"import.status_updated",id:"fileUploadChannel",handler:t.handleImportEvent});case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.$store.commit("ui/removeWebsocketEventHandler",{eventName:"import.status_updated",id:"fileUploadChannel"})},methods:{handleImportEvent:function(t){this.pendingUploadsById[t.upload.uuid]&&Object.assign(this.pendingUploadsById[t.upload.uuid],t.upload)},fetchPendingUploads:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("uploads/",{params:{channel:t.object.uuid,import_status:["pending","skipped","errored"],include_channels:"true"},paramsSerializer:function(t){return d.a.stringify(t,{indices:!1})}});case 2:a=e.sent,t.pendingUploads=a.data.results;case 4:case"end":return e.stop()}}),e)})))()}}},z=I,R=Object(w["a"])(z,s,n,!1,null,null,null);e["default"]=R.exports},c3b4:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui form"},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v(" Your attachment cannot be saved ")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e,s){return a("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)]):t._e(),a("div",{staticClass:"ui field"},[a("span",{attrs:{id:"avatarLabel"}},[t._t("label")],2),a("div",{staticClass:"ui stackable grid row"},[a("div",{staticClass:"three wide column"},[t.value&&t.value===t.initialValue?a("img",{class:["ui",t.imageClass,"image"],attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.value+"/proxy?next=medium_square_crop")}}):t.attachment?a("img",{class:["ui",t.imageClass,"image"],attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.attachment.uuid+"/proxy?next=medium_square_crop")}}):a("div",{class:["ui",t.imageClass,"static","large placeholder image"]})]),a("div",{staticClass:"eleven wide column"},[a("div",{staticClass:"file-input"},[a("label",{attrs:{for:t.attachmentId}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Upload New Picture…")])],1),a("input",{ref:"attachment",staticClass:"ui input",attrs:{id:t.attachmentId,type:"file",accept:"image/x-png,image/jpeg"},on:{change:t.submit}})]),a("div",{staticClass:"ui very small hidden divider"}),a("p",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph"}},[t._v(" PNG or JPG. Dimensions should be between 1400x1400px and 3000x3000px. Maximum file size allowed is 5MB. ")])],1),t.value?a("button",{staticClass:"ui basic tiny button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.remove(t.value)}}},[a("translate",{attrs:{"translate-context":"Content/Radio/Button.Label/Verb"}},[t._v(" Remove ")])],1):t._e(),t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui indeterminate text loader"},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v(" Uploading file… ")])],1)]):t._e()])])])])},n=[],i=(a("d401"),a("d3b7"),a("25f0"),a("bc3a")),r=a.n(i),o={props:{value:{type:String,default:null},imageClass:{type:String,default:"",required:!1}},data:function(){return{attachment:null,isLoading:!1,errors:[],initialValue:this.value,attachmentId:Math.random().toString(36).substring(7)}},watch:{value:function(t){this.attachment&&t===this.initialValue&&this.remove(this.attachment.uuid)}},methods:{submit:function(){var t=this;this.isLoading=!0,this.errors=[];var e=this;this.file=this.$refs.attachment.files[0];var a=new FormData;a.append("file",this.file),r.a.post("attachments/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.isLoading=!1,e.attachment=a.data,e.$emit("input",e.attachment.uuid)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},remove:function(t){var e=this;this.isLoading=!0,this.errors=[];var a=this;r.a.delete("attachments/".concat(t,"/")).then((function(t){e.isLoading=!1,a.attachment=null,a.$emit("delete")}),(function(t){a.isLoading=!1,a.errors=t.backendErrors}))}}},l=o,c=a("2877"),u=Object(c["a"])(l,s,n,!1,null,null,null);e["a"]=u.exports}}]);