(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["albums~artists~channels~channels-auth~core~favorites~library~playlists~podcasts~radios~tags~tracks"],{5866:function(t,e,a){"use strict";a("4de4"),a("d3b7"),a("4160"),a("159b"),a("d81d"),a("c975"),a("7db0"),a("c740");var r,i,n=a("bc3a"),s=a.n(n),l=a("1157"),o=a.n(l),u={computed:{playable:function(){return!!this.isPlayable||(this.track?this.track.uploads&&this.track.uploads.length>0:this.artist&&this.artist.tracks_count?this.artist.tracks_count>0:this.artist&&this.artist.albums?this.artist.albums.filter((function(t){return!0===t.is_playable})).length>0:!!this.tracks&&this.tracks.filter((function(t){return t.uploads&&t.uploads.length>0})).length>0)},filterableArtist:function(){return this.track?this.track.artist:this.album?this.album.artist:this.artist?this.artist:null}},methods:{filterArtist:function(){this.$store.dispatch("moderation/hide",{type:"artist",target:this.filterableArtist})},activateTrack:function(t,e){this.currentTrack&&this.isPlaying&&t.id===this.currentTrack.id?this.pausePlayback():this.currentTrack&&!this.isPlaying&&t.id===this.currentTrack.id?this.resumePlayback():this.replacePlay(this.tracks,e)},getTracksPage:function(t,e,a,r){t>10&&a(r);var i=this;e.page_size=100,e.page=t,e.hidden="",e.playable="true",r=r||[],s.a.get("tracks/",{params:e}).then((function(n){n.data.results.forEach((function(t){r.push(t)})),n.data.next?i.getTracksPage(t+1,e,a,r):a(r)}))},getPlayableTracks:function(){var t=this;this.isLoading=!0;var e=new Promise((function(e,a){if(t.tracks)e(t.tracks);else if(t.track)t.track.uploads&&0!==t.track.uploads.length?e([t.track]):s.a.get("tracks/".concat(t.track.id,"/")).then((function(t){e([t.data])}));else if(t.playlist){var r="playlists/"+t.playlist.id+"/";s.a.get(r+"tracks/").then((function(a){var r=t.$store.getters["moderation/artistFilters"]().map((function(t){return t.target.id})),i=a.data.results.map((function(t){return t.track}));r.length>0&&(i=i.filter((function(t){var e=r.indexOf(t.artist.id)>-1;return!((e||t.album)&&r.indexOf(t.album.artist.id)>-1)}))),e(i)}))}else if(t.artist){var i={artist:t.artist.id,include_channels:"true",ordering:"album__release_date,disc_number,position"};t.getTracksPage(1,i,e)}else if(t.album){var n={album:t.album.id,include_channels:"true",ordering:"disc_number,position"};t.getTracksPage(1,n,e)}else if(t.library){var l={library:t.library.uuid,ordering:"-creation_date"};t.getTracksPage(1,l,e)}}));return e.then((function(e){return setTimeout((function(e){t.isLoading=!1}),250),e.filter((function(t){return t.uploads&&t.uploads.length>0}))}))},add:function(){var t=this;this.getPlayableTracks().then((function(e){t.$store.dispatch("queue/appendMany",{tracks:e}).then((function(){return t.addMessage(e)}))})),o()(t.$el).find(".ui.dropdown").dropdown("hide")},replacePlay:function(){var t=this;t.$store.dispatch("queue/clean"),this.getPlayableTracks().then((function(e){t.$store.dispatch("queue/appendMany",{tracks:e}).then((function(){if(t.track){var a=t.tracks.findIndex((function(e){return e.id===t.track.id}));t.$store.dispatch("queue/currentIndex",a)}t.addMessage(e)}))})),o()(t.$el).find(".ui.dropdown").dropdown("hide")},addNext:function(t){var e=this,a=0===this.$store.state.queue.tracks.length;this.getPlayableTracks().then((function(r){e.$store.dispatch("queue/appendMany",{tracks:r,index:e.$store.state.queue.currentIndex+1}).then((function(){return e.addMessage(r)}));var i=t&&!a;i&&e.$store.dispatch("queue/next")})),o()(e.$el).find(".ui.dropdown").dropdown("hide")},addMessage:function(t){if(!(t.length<1)){var e=this.$npgettext("*/Queue/Message","%{ count } track was added to your queue","%{ count } tracks were added to your queue",t.length);this.$store.commit("ui/addMessage",{content:this.$gettextInterpolate(e,{count:t.length}),date:new Date})}}}},c=u,d=a("2877"),p=Object(d["a"])(c,r,i,!1,null,null,null);e["a"]=p.exports},a3e6:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:["ui",{tiny:t.discrete},{icon:!t.discrete},{buttons:!t.dropdownOnly&&!t.iconOnly},"play-button component-play-button"],attrs:{title:t.title}},[t.dropdownOnly?t._e():a("button",{class:t.buttonClasses.concat(["ui",{loading:t.isLoading},{mini:t.discrete},{disabled:!t.playable}]),attrs:{disabled:!t.playable,"aria-label":t.labels.replacePlay},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.replacePlay.apply(null,arguments)}}},[t.playing?a("i",{staticClass:"pause icon"}):a("i",{class:[t.playIconClass,"icon"]}),t.discrete||t.iconOnly?t._e():[t._v(" "),t._t("default",(function(){return[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Play")])]}))]],2),t.discrete||t.iconOnly?t._e():a("button",{class:["ui",{disabled:!t.playable&&!t.filterableArtist},"floating","dropdown",{icon:!t.dropdownOnly},{button:!t.dropdownOnly}],on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.clicked=!0}}},[a("i",{class:t.dropdownIconClasses.concat(["icon"]),attrs:{title:t.title}}),t.clicked?a("div",{staticClass:"menu"},[a("button",{ref:"add",staticClass:"item basic",attrs:{"data-ref":"add",disabled:!t.playable,title:t.labels.addToQueue},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.add.apply(null,arguments)}}},[a("i",{staticClass:"plus icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Add to queue")])],1),a("button",{ref:"addNext",staticClass:"item basic",attrs:{"data-ref":"addNext",disabled:!t.playable,title:t.labels.playNext},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNext()}}},[a("i",{staticClass:"step forward icon"}),t._v(t._s(t.labels.playNext)+" ")]),a("button",{ref:"playNow",staticClass:"item basic",attrs:{"data-ref":"playNow",disabled:!t.playable,title:t.labels.playNow},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNext(!0)}}},[a("i",{staticClass:"play icon"}),t._v(t._s(t.labels.playNow)+" ")]),t.track?a("button",{staticClass:"item basic",attrs:{disabled:!t.playable,title:t.labels.startRadio},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$store.dispatch("radios/start",{type:"similar",objectId:t.track.id})}}},[a("i",{staticClass:"feed icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Play radio")])],1):t._e(),t.track?a("button",{staticClass:"item basic",attrs:{disabled:!t.playable},on:{click:function(e){return e.stopPropagation(),t.$store.commit("playlists/chooseTrack",t.track)}}},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Sidebar/Player/Icon.Tooltip/Verb"}},[t._v("Add to playlist…")])],1):t._e(),t.track&&!t.onTrackPage?a("button",{staticClass:"item basic",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$router.push("/library/tracks/"+t.track.id+"/")}}},[a("i",{staticClass:"info icon"}),"podcast"===t.track.artist.content_category?a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Episode details")]):a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Track details")])],1):t._e(),a("div",{staticClass:"divider"}),t.filterableArtist?a("button",{ref:"filterArtist",staticClass:"item basic",attrs:{"data-ref":"filterArtist",disabled:!t.filterableArtist,title:t.labels.hideArtist},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.filterArtist.apply(null,arguments)}}},[a("i",{staticClass:"eye slash outline icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Hide content from this artist")])],1):t._e(),t._l(t.getReportableObjs({track:t.track,album:t.album,artist:t.artist,playlist:t.playlist,account:t.account,channel:t.channel}),(function(e){return a("button",{key:e.target.type+e.target.id,ref:"report"+e.target.type+e.target.id,refInFor:!0,staticClass:"item basic",attrs:{"data-ref":"report"+e.target.type+e.target.id},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])}))],2):t._e()])])},i=[],n=(a("7db0"),a("d3b7"),a("1157")),s=a.n(n),l=a("add5"),o=a("5866"),u={mixins:[l["a"],o["a"]],props:{tracks:{type:Array,required:!1,default:function(){return null}},track:{type:Object,required:!1,default:function(){return null}},account:{type:Object,required:!1,default:function(){return null}},dropdownIconClasses:{type:Array,required:!1,default:function(){return["dropdown"]}},playIconClass:{type:String,required:!1,default:"play icon"},buttonClasses:{type:Array,required:!1,default:function(){return["button"]}},playlist:{type:Object,required:!1,default:function(){return null}},discrete:{type:Boolean,default:!1},dropdownOnly:{type:Boolean,default:!1},iconOnly:{type:Boolean,default:!1},artist:{type:Object,required:!1,default:function(){return null}},album:{type:Object,required:!1,default:function(){return null}},library:{type:Object,required:!1,default:function(){return null}},channel:{type:Object,required:!1,default:function(){return null}},isPlayable:{type:Boolean,required:!1,default:null},playing:{type:Boolean,required:!1,default:!1},paused:{type:Boolean,required:!1,default:!1}},data:function(){return{isLoading:!1,clicked:!1}},computed:{labels:function(){var t;return t=this.track?this.$pgettext("*/Queue/Dropdown/Button/Title","Play track"):this.album?this.$pgettext("*/Queue/Dropdown/Button/Title","Play album"):this.artist?this.$pgettext("*/Queue/Dropdown/Button/Title","Play artist"):this.playlist?this.$pgettext("*/Queue/Dropdown/Button/Title","Play playlist"):this.$pgettext("*/Queue/Dropdown/Button/Title","Play tracks"),{playNow:this.$pgettext("*/Queue/Dropdown/Button/Title","Play now"),addToQueue:this.$pgettext("*/Queue/Dropdown/Button/Title","Add to current queue"),playNext:this.$pgettext("*/Queue/Dropdown/Button/Title","Play next"),startRadio:this.$pgettext("*/Queue/Dropdown/Button/Title","Play similar songs"),report:this.$pgettext("*/Moderation/*/Button/Label,Verb","Report…"),addToPlaylist:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Add to playlist…"),replacePlay:t}},title:function(){return this.playable?this.$pgettext("*/*/Button.Label/Noun","More…"):this.track?this.$pgettext("*/Queue/Button/Title","This track is not available in any library you have access to"):null},onTrackPage:function(){return"library.tracks.detail"===this.$router.currentRoute.name}},watch:{clicked:function(){var t=this,e=this;this.$nextTick((function(){s()(t.$el).find(".ui.dropdown").dropdown({selectOnKeydown:!1,action:function(t,a,r){var i=e.$refs[r.data("ref")];Array.isArray(i)?i[0].click():i.click(),s()(e.$el).find(".ui.dropdown").dropdown("hide")}}),s()(t.$el).find(".ui.dropdown").dropdown("show",(function(){var t=s()(e.$el).find(".ui.dropdown").find(".menu"),a=t.get(0).getBoundingClientRect(),r=document.documentElement.clientWidth,i=a.right-r,n=-a.left,l=0;i>0?(l=-i-5,t.css({cssText:"left: ".concat(l,"px !important;")})):n>0&&(l=n+5,t.css({cssText:"right: -".concat(l,"px !important;")}))}))}))}}},c=u,d=a("2877"),p=Object(d["a"])(c,r,i,!1,null,null,null);e["a"]=p.exports},a9e3:function(t,e,a){"use strict";var r=a("83ab"),i=a("da84"),n=a("e330"),s=a("94ca"),l=a("6eeb"),o=a("1a2d"),u=a("7156"),c=a("3a9b"),d=a("d9b5"),p=a("c04e"),b=a("d039"),f=a("241c").f,h=a("06cf").f,y=a("9bf2").f,g=a("408a"),k=a("58a8").trim,m="Number",x=i[m],v=x.prototype,_=i.TypeError,w=n("".slice),$=n("".charCodeAt),P=function(t){var e=p(t,"number");return"bigint"==typeof e?e:T(e)},T=function(t){var e,a,r,i,n,s,l,o,u=p(t,"number");if(d(u))throw _("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=k(u),e=$(u,0),43===e||45===e){if(a=$(u,2),88===a||120===a)return NaN}else if(48===e){switch($(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(n=w(u,2),s=n.length,l=0;l<s;l++)if(o=$(n,l),o<48||o>i)return NaN;return parseInt(n,r)}return+u};if(s(m,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var N,I=function(t){var e=arguments.length<1?0:x(P(t)),a=this;return c(v,a)&&b((function(){g(a)}))?u(Object(e),a,I):e},A=r?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),C=0;A.length>C;C++)o(x,N=A[C])&&!o(I,N)&&y(I,N,h(x,N));I.prototype=v,v.constructor=I,l(i,m,I)}},add5:function(t,e,a){"use strict";var r,i,n={methods:{getReportableObjs:function(t){var e=t.track,a=t.album,r=t.artist,i=t.playlist,n=t.account,s=t.library,l=t.channel,o=[];if(n){var u=this.$pgettext("*/Moderation/*/Verb","Report @%{ username }…");o.push({label:this.$gettextInterpolate(u,{username:n.preferred_username}),target:{type:"account",_obj:n,full_username:n.full_username,label:n.full_username,typeLabel:this.$pgettext("*/*/*/Noun","Account")}}),e&&(a=e.album,r=e.artist)}return e&&(o.push({label:this.$pgettext("*/Moderation/*/Verb","Report this track…"),target:{type:"track",id:e.id,_obj:e,label:e.title,typeLabel:this.$pgettext("*/*/*/Noun","Track")}}),a=e.album,r=e.artist),a&&(o.push({label:this.$pgettext("*/Moderation/*/Verb","Report this album…"),target:{type:"album",id:a.id,label:a.title,_obj:a,typeLabel:this.$pgettext("*/*/*","Album")}}),r||(r=a.artist)),l?o.push({label:this.$pgettext("*/Moderation/*/Verb","Report this channel…"),target:{type:"channel",uuid:l.uuid,label:l.artist.name,_obj:l,typeLabel:this.$pgettext("*/*/*","Channel")}}):r&&o.push({label:this.$pgettext("*/Moderation/*/Verb","Report this artist…"),target:{type:"artist",id:r.id,label:r.name,_obj:r,typeLabel:this.$pgettext("*/*/*/Noun","Artist")}}),i&&o.push({label:this.$pgettext("*/Moderation/*/Verb","Report this playlist…"),target:{type:"playlist",id:i.id,label:i.name,_obj:i,typeLabel:this.$pgettext("*/*/*","Playlist")}}),s&&o.push({label:this.$pgettext("*/Moderation/*/Verb","Report this library…"),target:{type:"library",uuid:s.uuid,label:s.name,_obj:s,typeLabel:this.$pgettext("*/*/*/Noun","Library")}}),o}}},s=n,l=a("2877"),o=Object(l["a"])(s,r,i,!1,null,null,null);e["a"]=o.exports},c740:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").findIndex,n=a("44d2"),s="findIndex",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(s)}}]);