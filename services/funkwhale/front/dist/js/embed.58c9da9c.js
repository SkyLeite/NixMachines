(function(t){function r(r){for(var a,c,i=r[0],o=r[1],l=r[2],p=0,d=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&d.push(s[c][0]),s[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(r);while(d.length)d.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,r=0;r<n.length;r++){for(var e=n[r],a=!0,i=1;i<e.length;i++){var o=e[i];0!==s[o]&&(a=!1)}a&&(n.splice(r--,1),t=c(c.s=e[0]))}return t}var a={},s={embed:0},n=[];function c(r){if(a[r])return a[r].exports;var e=a[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=a,c.d=function(t,r,e){c.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,r){if(1&r&&(t=c(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)c.d(e,a,function(r){return t[r]}.bind(null,a));return e},c.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(r,"a",r),r},c.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},c.p="/front/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=r,i=i.slice();for(var l=0;l<i.length;l++)r(i[l]);var u=o;n.push([0,"chunk-vendors","chunk-embed-vendors","chunk-common"]),e()})({0:function(t,r,e){t.exports=e("1216")},"007c":function(t,r,e){t.exports=e.p+"img/default-cover.bde4a13c.jpeg"},1216:function(t,r,e){"use strict";e.r(r);e("e623"),e("e379"),e("5dc8"),e("37e1");var a=e("2b0e"),s=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("main",{class:[t.theme]},[a("svg",{staticStyle:{display:"none"},attrs:{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"}},[a("symbol",{attrs:{id:"plyr-download"}},[a("path",{attrs:{d:"M9 13c.3 0 .5-.1.7-.3L15.4 7 14 5.6l-4 4V1H8v8.6l-4-4L2.6 7l5.7 5.7c.2.2.4.3.7.3zM2 15h14v2H2z"}})]),a("symbol",{attrs:{id:"plyr-enter-fullscreen"}},[a("path",{attrs:{d:"M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"}})]),a("symbol",{attrs:{id:"plyr-exit-fullscreen"}},[a("path",{attrs:{d:"M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"}})]),a("symbol",{attrs:{id:"plyr-fast-forward"}},[a("path",{attrs:{d:"M7.875 7.171L0 1v16l7.875-6.171V17L18 9 7.875 1z"}})]),a("symbol",{attrs:{id:"plyr-muted"}},[a("path",{attrs:{d:"M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"}})]),a("symbol",{attrs:{id:"plyr-pause"}},[a("path",{attrs:{d:"M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zM12 1c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"}})]),a("symbol",{attrs:{id:"plyr-pip"}},[a("path",{attrs:{d:"M13.293 3.293L7.022 9.564l1.414 1.414 6.271-6.271L17 7V1h-6z"}}),a("path",{attrs:{d:"M13 15H3V5h5V3H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-6h-2v5z"}})]),a("symbol",{attrs:{id:"plyr-play"}},[a("path",{attrs:{d:"M15.562 8.1L3.87.225C3.052-.337 2 .225 2 1.125v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"}})]),a("symbol",{attrs:{id:"plyr-restart"}},[a("path",{attrs:{d:"M9.7 1.2l.7 6.4 2.1-2.1c1.9 1.9 1.9 5.1 0 7-.9 1-2.2 1.5-3.5 1.5-1.3 0-2.6-.5-3.5-1.5-1.9-1.9-1.9-5.1 0-7 .6-.6 1.4-1.1 2.3-1.3l-.6-1.9C6 2.6 4.9 3.2 4 4.1 1.3 6.8 1.3 11.2 4 14c1.3 1.3 3.1 2 4.9 2 1.9 0 3.6-.7 4.9-2 2.7-2.7 2.7-7.1 0-9.9L16 1.9l-6.3-.7z"}})]),a("symbol",{attrs:{id:"plyr-rewind"}},[a("path",{attrs:{d:"M10.125 1L0 9l10.125 8v-6.171L18 17V1l-7.875 6.171z"}})]),a("symbol",{attrs:{id:"plyr-settings"}},[a("path",{attrs:{d:"M16.135 7.784a2 2 0 0 1-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 0 1-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 0 1-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 0 1-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 0 1 1.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 0 1 2.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 0 1 2.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 0 1 1.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}})]),a("symbol",{attrs:{id:"plyr-volume"}},[a("path",{attrs:{d:"M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"}}),a("path",{attrs:{d:"M11.282 5.282a.909.909 0 0 0 0 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 0 0 0 1.316c.145.145.636.262 1.018.156a.725.725 0 0 0 .298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 0 0-1.316 0zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"}})]),a("symbol",{attrs:{id:"plyr-step-backward"}},[a("path",{attrs:{d:"M979 141c25-25 45-16 45 19v1472c0 35-20 44-45 19L269 941c-6-6-10-12-13-19v678c0 35-29 64-64 64H64c-35 0-64-29-64-64V192c0-35 29-64 64-64h128c35 0 64 29 64 64v678c3-7 7-13 13-19z"}})]),a("symbol",{attrs:{id:"plyr-step-forward"}},[a("path",{attrs:{d:"M45 1651c-25 25-45 16-45-19V160c0-35 20-44 45-19l710 710c6 6 10 12 13 19V192c0-35 29-64 64-64h128c35 0 64 29 64 64v1408c0 35-29 64-64 64H832c-35 0-64-29-64-64V922c-3 7-7 13-13 19z"}})])]),a("article",[t.currentTrack?a("aside",{staticClass:"cover main"},[t.currentTrack.cover?a("img",{attrs:{height:"120",src:t.currentTrack.cover,alt:"Cover"}}):t.artistCover?a("img",{attrs:{height:"120",src:t.artistCover,alt:"Cover"}}):a("img",{attrs:{height:"120",src:e("007c"),alt:"Cover"}})]):t._e(),a("div",{staticClass:"content",attrs:{"aria-label":"Track information"}},[t.currentTrack?a("header",[a("h3",[a("a",{attrs:{href:t.fullUrl("/library/tracks/"+t.currentTrack.id),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.currentTrack.title))])]),a("a",{attrs:{href:t.fullUrl("/library/artists/"+t.currentTrack.artist.id),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.currentTrack.artist.name))])]):t._e(),t.isLoading?t._e():a("section",{staticClass:"controls",attrs:{"aria-label":"Audio player"}},[t.currentTrack&&t.currentTrack.sources.length>0?[t.tracks.length>1?a("div",{staticClass:"queue-controls plyr--audio"},[a("div",{staticClass:"plyr__controls"},[a("button",{staticClass:"plyr__control",attrs:{type:"button","aria-label":"Play previous track"},on:{focus:function(r){return t.setControlFocus(r,!0)},blur:function(r){return t.setControlFocus(r,!1)},click:function(r){return t.previous()}}},[a("svg",{staticClass:"icon--not-pressed",attrs:{role:"presentation",focusable:"false",viewBox:"0 0 1100 1650",width:"80",height:"80"}},[a("use",{attrs:{"xlink:href":"#plyr-step-backward"}})])]),a("button",{staticClass:"plyr__control",attrs:{type:"button","aria-label":"Play next track"},on:{click:function(r){return t.next()},focus:function(r){return t.setControlFocus(r,!0)},blur:function(r){return t.setControlFocus(r,!1)}}},[a("svg",{staticClass:"icon--not-pressed",attrs:{role:"presentation",focusable:"false",viewBox:"0 0 1100 1650",width:"80",height:"80"}},[a("use",{attrs:{"xlink:href":"#plyr-step-forward"}})])])])]):t._e(),a("vue-plyr",{key:t.currentIndex,ref:"player",staticClass:"player",attrs:{options:{loadSprite:!1,controls:t.controls,duration:t.currentTrack.sources[0].duration,autoplay:t.autoplay}}},[a("audio",{attrs:{preload:"none"}},t._l(t.currentTrack.sources,(function(t,r){return a("source",{key:r,attrs:{src:t.src,type:t.type}})})),0)])]:a("div",{staticClass:"player"},["invalid_type"===t.error?a("span",{staticClass:"error"},[t._v("Widget improperly configured (bad resource type "+t._s(t.type)+").")]):"invalid_id"===t.error?a("span",{staticClass:"error"},[t._v("Widget improperly configured (missing resource id).")]):"server_not_found"===t.error?a("span",{staticClass:"error"},[t._v("Track not found.")]):"server_requires_auth"===t.error?a("span",{staticClass:"error"},[t._v("You need to login to access this resource.")]):"server_error"===t.error?a("span",{staticClass:"error"},[t._v("An unknown error occurred while loading track data from server.")]):t.currentTrack&&0===t.currentTrack.sources.length?a("span",{staticClass:"error"},[t._v("This track is unavailable.")]):a("span",{staticClass:"error"},[t._v("An unknown error occurred while loading track data.")])]),a("a",{staticClass:"logo-wrapper",attrs:{title:"Funkwhale",href:"https://funkwhale.audio",target:"_blank",rel:"noopener noreferrer"}},[a("logo",{staticClass:"logo",attrs:{fill:t.currentTheme.textColor}})],1)],2)])]),t.tracks.length>1?a("div",{staticClass:"queue-wrapper",attrs:{id:"queue"}},[a("table",{staticClass:"queue"},[a("tbody",t._l(t.tracks,(function(r,e){return r.sources.length>0?a("tr",{key:e,class:[{active:e===t.currentIndex}],attrs:{id:"queue-item-"+e,role:"button"},on:{click:function(r){return t.play(e)},keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.play(e)}}},[a("td",{staticClass:"position-cell",attrs:{width:"40"}},[a("span",{staticClass:"position"},[t._v(" "+t._s(e+1)+" ")])]),a("td",{staticClass:"title",attrs:{title:r.title}},[a("div",{staticClass:"ellipsis",attrs:{colspan:"2"}},[t._v(" "+t._s(r.title)+" ")])]),a("td",{staticClass:"artist",attrs:{title:r.artist.name}},[a("div",{staticClass:"ellipsis"},[t._v(" "+t._s(r.artist.name)+" ")])]),a("td",{staticClass:"album"},[r.album?a("div",{staticClass:"ellipsis",attrs:{title:r.album.title}},[t._v(" "+t._s(r.album.title)+" ")]):t._e()]),a("td",{attrs:{width:"50"}},[t._v(" "+t._s(t.time.durationFormatted(r.sources[0].duration))+" ")])]):t._e()})),0)])]):t._e()])},n=[],c=(e("ac1f"),e("5319"),e("841c"),e("c975"),e("99af"),e("d81d"),e("2ca0"),e("4de4"),e("d3b7"),e("bc3a")),i=e.n(c),o=e("2241"),l=e("4b90"),u=e("cadb");function p(){var t,r=/\+/g,e={},a=/([^&=]+)=?([^&]*)/g,s=function(t){return decodeURIComponent(t.replace(r," "))},n=window.location.search.substring(1);while(null!==(t=a.exec(n)))e[s(t[1])]=s(t[2]);return e}var d={name:"App",components:{Logo:o["a"]},data:function(){return{time:u["a"],supportedTypes:["track","album","artist","playlist","channel"],baseUrl:"",error:null,type:null,id:null,tracks:[],autoplay:!1,url:null,isLoading:!0,theme:"dark",currentIndex:-1,artistCover:null,themes:{dark:{textColor:"white"}}}},computed:{currentTrack:function(){return 0===this.tracks.length?null:this.tracks[this.currentIndex]},currentTheme:function(){return this.themes[this.theme]},controls:function(){return["play","progress","current-time","mute","volume"]},hasPrevious:function(){return this.currentIndex>0},hasNext:function(){return this.currentIndex<this.tracks.length-1}},watch:{currentIndex:function(t){var r=this;this.$nextTick((function(){if(r.bindEvents(),r.tracks.length>0){var e=document.getElementById("queue-item-".concat(t));if(!e)return;var a=e.offsetTop;document.getElementById("queue").scrollTop=a-10}}))},tracks:function(){this.currentIndex=0}},created:function(){var t=p();this.baseUrl=t.b||"",this.type=t.type,-1===this.supportedTypes.indexOf(this.type)&&(this.error="invalid_type"),this.id=t.id,this.id||(this.error="invalid_id"),this.error?this.isLoading=!1:(t.instance&&(this.baseUrl=t.instance),this.autoplay=void 0!==t.autoplay||void 0!==t.auto_play,this.fetch(this.type,this.id))},mounted:function(){var t=document.createElement("a");t.href=this.baseUrl,this.url=t},methods:{next:function(){this.hasNext&&this.play(this.currentIndex+1)},previous:function(){this.hasPrevious&&this.play(this.currentIndex-1)},setControlFocus:function(t,r){r?t.target.classList.add("plyr__tab-focus"):t.target.classList.remove("plyr__tab-focus")},fetch:function(t,r){"track"===t&&this.fetchTrack(r),"album"===t&&this.fetchTracks({album:r,playable:!0,ordering:"disc_number,position"}),"channel"===t&&this.fetchTracks({channel:r,playable:!0,include_channels:"true",ordering:"-creation_date"}),"artist"===t&&(this.fetchTracks({artist:r,playable:!0,include_channels:"true",ordering:"-album__release_date,disc_number,position"}),this.fetchArtistCover(r)),"playlist"===t&&this.fetchTracks({},"/api/v1/playlists/".concat(r,"/tracks/"))},play:function(t){this.currentIndex=t;var r=this;this.$nextTick((function(){r.$refs.player.player.play()}))},fetchTrack:function(t){var r=this,e="".concat(this.baseUrl,"/api/v1/tracks/").concat(t,"/");i.a.get(e).then((function(t){r.tracks=r.parseTracks([t.data]),r.isLoading=!1})).catch((function(t){t.response?404===t.response.status?r.error="server_not_found":403===t.response.status?r.error="server_requires_auth":500===t.response.status?r.error="server_error":r.error="server_unknown_error":r.error="server_unknown_error",r.isLoading=!1}))},fetchTracks:function(t,r){r=r||"/api/v1/tracks/",t.include_channels="true";var e=this,a="".concat(this.baseUrl).concat(r);i.a.get(a,{params:t}).then((function(t){e.tracks=e.parseTracks(t.data.results),e.isLoading=!1})).catch((function(t){t.response?404===t.response.status?e.error="server_not_found":403===t.response.status?e.error="server_requires_auth":500===t.response.status?e.error="server_error":e.error="server_unknown_error":e.error="server_unknown_error",e.isLoading=!1}))},parseTracks:function(t){var r=this;return"playlist"===this.type&&(t=t.map((function(t){return t.track}))),t.map((function(t){return{id:t.id,title:t.title,artist:t.artist,album:t.album,cover:r.getCover((t||t.album).cover),sources:r.getSources(t.uploads)}}))},fetchArtistCover:function(t){var r=this;r.isLoading=!0;var e="".concat(this.baseUrl,"/api/v1/artists/").concat(t,"/");i.a.get(e).then((function(t){r.isLoading=!1,r.artistCover=t.data.cover.urls.medium_square_crop}))},bindEvents:function(){var t=this;this.$refs.player.player.on("ended",(function(){t.next()}))},fullUrl:function(t){return t.startsWith("/")?this.baseUrl+t:t},getCover:function(t){if(t)return t.urls.medium_square_crop},getSources:function(t){var r=this,e=document.createElement("audio"),a=["probably","maybe"],s=t.filter((function(t){var r=e.canPlayType(t.mimetype);return a.indexOf(r)>-1})).map((function(t){return{type:t.mimetype,src:r.fullUrl(t.listen_url),duration:t.duration}}));return e.remove(),s.length>0&&s.push({type:"audio/mpeg",src:l["a"].updateQueryString(r.fullUrl(s[0].src),"to","mp3")}),s}}},h=d,f=(e("7468"),e("2877")),v=Object(f["a"])(h,s,n,!1,null,null,null),y=v.exports,m=e("788d");a["a"].use(m["a"]),a["a"].config.productionTip=!1,new a["a"]({el:"#app",components:{EmbedFrame:y},render:function(t){return t("EmbedFrame")}})},2241:function(t,r,e){"use strict";var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("svg",{attrs:{id:"layer_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 141.7 141.7","enable-background":"new 0 0 141.7 141.7","xml:space":"preserve"}},[e("g",[e("g",[e("path",{attrs:{fill:t.fill,d:"M70.9,86.1c11.7,0,21.2-9.5,21.2-21.2c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1c0,6-4.9,11-11,11\n      c-6,0-11-4.9-11-11c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1C49.7,76.6,59.2,86.1,70.9,86.1z"}}),e("path",{attrs:{fill:t.fill,d:"M70.9,106.1c22.7,0,41.2-18.5,41.2-41.2c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1\n      c0,17.1-13.9,31-31,31c-17.1,0-31-13.9-31-31c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1C29.6,87.6,48.1,106.1,70.9,106.1z"}}),e("path",{attrs:{fill:t.fill,d:"M131.1,63.8h-8c-0.6,0-1.1,0.5-1.1,1.1C122,93.1,99,116,70.9,116c-28.2,0-51.1-22.9-51.1-51.1\n      c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1c0,33.8,27.5,61.3,61.3,61.3c33.8,0,61.3-27.5,61.3-61.3\n      C132.2,64.3,131.7,63.8,131.1,63.8z"}})]),e("path",{attrs:{fill:t.fill,d:"M43.3,37.3c4.1,2.1,8.5,2.5,12.5,4.8c2.6,1.5,4.2,3.2,5.8,5.7c2.5,3.8,2.4,8.5,2.4,8.5l0.3,5.2\n    c0,0,2,5.2,6.4,5.2c4.7,0,6.4-5.2,6.4-5.2l0.3-5.2c0,0-0.1-4.7,2.4-8.5c1.6-2.5,3.2-4.3,5.8-5.7c4-2.3,8.4-2.7,12.5-4.8\n    c4.1-2.1,8.1-4.8,10.8-8.6c2.7-3.8,4-8.8,2.5-13.2c-7.8-0.4-16.8,0.5-23.7,4.2c-9.6,5.1-15.4,3.3-17.1,10.9h-0.1\n    c-1.7-7.7-7.5-5.8-17.1-10.9c-6.9-3.7-15.9-4.6-23.7-4.2c-1.5,4.4-0.2,9.4,2.5,13.2C35.2,32.5,39.2,35.2,43.3,37.3z"}})])])},s=[],n={props:{fill:{type:String,default:"#222222"}}},c=n,i=e("2877"),o=Object(i["a"])(c,a,s,!1,null,null,null);r["a"]=o.exports},"4b90":function(t,r,e){"use strict";e("4d63"),e("c607"),e("ac1f"),e("2c3e"),e("25f0"),e("c975"),e("466d"),e("5319");r["a"]={updateQueryString:function(t,r,e){var a=new RegExp("([?&])"+r+"=.*?(&|$)","i"),s=-1!==t.indexOf("?")?"&":"?";return t.match(a)?t.replace(a,"$1"+r+"="+e+"$2"):t+s+r+"="+e}}},7468:function(t,r,e){"use strict";e("bbdf")},bbdf:function(t,r,e){}});